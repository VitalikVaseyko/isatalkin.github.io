"use strict";!function(){var t,r=document.querySelector(".map"),e=document.querySelectorAll(".about-map"),i=document.querySelectorAll(".map-card"),s=document.querySelector(".map-pin"),n=(s.querySelector("use"),document.querySelectorAll("map-pin__button")),c=document.querySelector(".map__description"),l=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,o=function(o){t.forEach(function(e,t){if(e.classList.contains("active")&&e.classList.remove("active"),o.target===e||e===document.activeElement){s.classList.add("map-pin--shown"),i.forEach(function(e){e.classList.contains("map-card--shown")&&(e.classList.remove("map-card--shown"),e.removeAttribute("style"),e.classList.add("map-card--hidden"))});var n=e.getBoundingClientRect();i[t].classList.add("map-card--shown"),i[t].classList.remove("map-card--hidden"),e.classList.add("active"),l<767&&(i[t].style.right="20px"),768<l&&(i[t].style.left=n.left-i[t].offsetWidth/3+"px"),i[t].style.top=n.top-r.getBoundingClientRect().top-i[t].getBoundingClientRect().height-50+"px",s.classList.add("map-pin--shown"),s.style.left=n.left+s.getBoundingClientRect().width/4+"px",s.style.top=n.top-r.getBoundingClientRect().top-75+"px",768<l&&i[t].getBoundingClientRect().left<c.getBoundingClientRect().right&&i[t].getBoundingClientRect().top<c.getBoundingClientRect().bottom||i[t].getBoundingClientRect().top<r.getBoundingClientRect().top?(i[t].style.top=n.top-r.getBoundingClientRect().top+i[t].getBoundingClientRect().height/2-45+"px",s.style.top=n.top-r.getBoundingClientRect().top+75+"px",s.querySelector("use").setAttributeNS("http://www.w3.org/1999/xlink","xlink:href","img/svg-sprite/sprite.svg#map-pin-reverted")):s.querySelector("use").setAttributeNS("http://www.w3.org/1999/xlink","xlink:href","img/svg-sprite/sprite.svg#map-pin")}})};function a(){s.classList.remove("map-pin--shown"),s.removeAttribute("style"),i.forEach(function(e){e.classList.contains("map-card--shown")&&(e.classList.remove("map-card--shown"),e.removeAttribute("style"),e.classList.add("map-card--hidden"))}),e.forEach(function(e){0<e.getBoundingClientRect().width&&(e.addEventListener("mouseover",o),e.addEventListener("mouseout",a),t=e.querySelectorAll(".map-part"))})}n.forEach(function(e,t){e.addEventListener("click",function(e){e.preventDefault(),i[t].classList.remove("map-card--shown"),i[t].removeAttribute("style"),i[t].classList.add("map-card--hidden")})}),a(),window.addEventListener("resize",function(){a()})}(),function(){if(767<window.innerWidth)for(var e=new ScrollMagic.Controller,t=document.querySelectorAll(".animated-block"),n=0;n<t.length;n++)new ScrollMagic.Scene({triggerElement:t[n],triggerHook:.8}).setClassToggle(t[n],"show").reverse(!1).addTo(e)}(),$.scrollLock=function(){var o=$("html"),t=!1,n={scrollLeft:$(window).scrollLeft(),scrollTop:$(window).scrollTop()},r={},i={"overflow-y":"scroll",position:"fixed",width:"100%"};function s(){var e,t=o.attr("style"),n={};t&&(e=t.split(/;\s/),$.each(e,function(e){if(e){var t=e.split(/\s:\s/);t.length<2||(n[t[0]]=t[1])}}),$.extend(r,n))}function c(){var e={};t||(n={scrollLeft:$(window).scrollLeft(),scrollTop:$(window).scrollTop()},s(),$.extend(e,i,{left:-n.scrollLeft+"px",top:-n.scrollTop+"px"}),o.css(e),$(window).scrollLeft(0).scrollTop(0),t=!0)}function l(){t&&(o.attr("style",$("<x>").css(r).attr("style")||""),$(window).scrollLeft(n.scrollLeft).scrollTop(n.scrollTop),t=!1)}return s(),function(e){arguments.length?e?c():l():t?l():c()}}(),jquery.scrollLock.simple.js,$.scrollLock=function(){var e,t,n=!1;function o(){e||(e=$("body")),t=e.css("overflow"),e.css("overflow","hidden"),n=!0}function r(){e.css("overflow",t),n=!1}return function(e){arguments.length?e?o():r():n?r():o()}}(),function(){var n,o,e=document.querySelectorAll(".brand__button"),t=document.querySelectorAll(".brand__logo"),r=document.querySelectorAll(".brand__description");n=t,o=r,e.forEach(function(e,t){e.addEventListener("click",function(){"Подробнее"===e.textContent?(e.textContent="Закрыть",e.classList.remove("brand__button--open"),n[t].classList.remove("brand__logo--fade-in"),n[t].classList.add("brand__logo--hidden"),setTimeout(function(){n[t].style.display="none",o[t].classList.remove("brand__description--hidden"),o[t].classList.add("brand__description--shown")},500)):"Закрыть"===e.textContent&&(e.textContent="Подробнее",e.classList.add("brand__button--open"),o[t].classList.add("brand__description--fade-out"),setTimeout(function(){o[t].classList.remove("brand__description--shown"),o[t].classList.add("brand__description--hidden"),o[t].classList.remove("brand__description--fade-out"),n[t].removeAttribute("style"),n[t].classList.remove("brand__logo--hidden"),n[t].classList.add("brand__logo--fade-in")},500))})})}(),function(){var r=void 0;function e(){var e=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,t=document.querySelectorAll(".brands-wrapper"),n=document.querySelectorAll(".brands__container"),o=document.querySelectorAll(".brand");e<1023&&void 0===r?(t.forEach(function(e){e.classList.add("swiper-container")}),n.forEach(function(e){e.classList.add("swiper-wrapper")}),o.forEach(function(e){e.classList.add("swiper-slide")}),r=new Swiper(".swiper-container",{direction:"horizontal",loop:!1,spaceBetween:10,breakpoints:{767:{spaceBetween:10,slidesOffsetBefore:30,width:260},1023:{spaceBetween:20,slidesOffsetBefore:60,width:540}}})):1023<e&&void 0!==r&&(document.querySelectorAll(".swiper-container").forEach(function(e){e.swiper.destroy()}),r=void 0,document.querySelectorAll(".swiper-wrapper").forEach(function(e){e.removeAttribute("style")}),document.querySelectorAll(".swiper-slide").forEach(function(e){e.removeAttribute("style")}),t.forEach(function(e){e.classList.remove("swiper-container")}),n.forEach(function(e){e.classList.remove("swiper-wrapper")}),o.forEach(function(e){e.classList.remove("swiper-slide")}))}e(),window.addEventListener("resize",function(){e()})}(),function(){var r=void 0;function e(){var e=$(window).width(),t=document.querySelectorAll(".career-people__slider"),n=document.querySelectorAll(".career-people__wrapper"),o=document.querySelectorAll(".career-people__item");e<1023&&null==r?(t.forEach(function(e){e.classList.add("swiper-container")}),n.forEach(function(e){e.classList.add("swiper-wrapper")}),o.forEach(function(e){e.classList.add("swiper-slide")}),r=new Swiper(".swiper-container",{direction:"horizontal",loop:!1})):1023<e&&null!=r&&($(".swiper-container").each(function(){this.swiper.destroy()}),r=void 0,t.forEach(function(e){e.classList.remove("swiper-container")}),n.forEach(function(e){e.classList.remove("swiper-wrapper")}),o.forEach(function(e){e.classList.remove("swiper-slide")}),jQuery(".swiper-wrapper").removeAttr("style"),jQuery(".swiper-slide").removeAttr("style"))}e(),$(window).on("resize",function(){e()}),767<window.innerWidth&&(document.querySelector(".career-join__title").textContent="Как присоединиться к нашей команде")}(),function(){var n=document.querySelector(".directors__list"),e=n.querySelectorAll(".directors__item"),o=function(){e.forEach(function(e){e.classList.remove("directors__item--opened"),e.style.marginBottom="initial"})},t=function(){e.forEach(function(e){var t=e.querySelector(".directors__accordeon");t.style.left=-e.offsetLeft+"px",t.style.width=n.offsetWidth+"px"})};t(),window.onresize=t,e.forEach(function(n){n.querySelector(".directors__avatar").addEventListener("click",function(e){e.preventDefault(),o(),n.classList.add("directors__item--opened");var t=n.querySelector(".directors__accordeon");n.style.marginBottom=t.clientHeight+"px",n.querySelector(".directors__close").addEventListener("click",function(){o()})})})}(),function(){var r=document.querySelector(".red-dot"),n=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,o=document.querySelectorAll(".timeline-dot"),i=document.querySelectorAll(".timeline-date"),s=document.querySelectorAll(".timeline__cards"),e=document.querySelector(".timeline__arrow"),t=document.querySelector(".bar-wrapper"),c=new PlainDraggable(r);PlainDraggable.draggableCursor="grab",PlainDraggable.draggingCursor="grabbing";var l=function(){n<767?c.snap={x:{start:65,step:69,center:!0},y:0}:767<n&&n<1023?c.snap={x:{start:65,step:69,center:!0},y:0}:1023<n&&n<1439?c.snap={x:{start:55,step:69,center:!0,end:69*o.length+30},y:0}:1439<n&&(c.snap={x:{start:105,step:77,center:!0,end:77*o.length+30},y:0}),o.forEach(function(e,t){var n=r.getBoundingClientRect(),o=e.getBoundingClientRect();n.left>o.left-15&&n.left<o.left+5&&(i.forEach(function(e,t){e.removeAttribute("style"),s[t].style.cssText="display: none;"}),i[t].style.cssText="color: rgba(208, 2, 27, 1);",s[t].style.cssText="display: flex;")})};i.forEach(function(e,t){e.addEventListener("click",function(){n<1023?r.style.cssText="transform: translate("+(o[t].offsetLeft-65)+"px, 0px);":1023<n&&n<1439?r.style.cssText="transform: translate("+(o[t].offsetLeft-55)+"px, 0px);":1439<n&&(r.style.cssText="transform: translate("+(o[t].offsetLeft-105)+"px, 0px);"),c.position(),l()})}),o.forEach(function(e,t){e.addEventListener("click",function(){n<1023?r.style.cssText="transform: translate("+(o[t].offsetLeft-67)+"px, 0px);":1023<n&&n<1439?r.style.cssText="transform: translate("+(o[t].offsetLeft-57)+"px, 0px);":1439<n&&(r.style.cssText="transform: translate("+(o[t].offsetLeft-107)+"px, 0px);"),c.position(),l()})}),l(),c.onMove=l,c.onDrag=function(e){return!!e.snapped},window.addEventListener("resize",function(){l()}),e.onclick=function(){window.animateScrollTo(t.getBoundingClientRect().right)}}(),$(document).ready(function(){$("#feedback-form__tel").mask("+9 (999) 999-9999")}),document.createElement("main"),function(){var r=void 0;function e(){var e=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,t=document.querySelectorAll(".investors-slider-container"),n=document.querySelectorAll(".investors-slider-container .item__content"),o=document.querySelectorAll(".item-card");e<767&&void 0===r?(t.forEach(function(e){e.classList.add("swiper-container")}),n.forEach(function(e){e.classList.add("swiper-wrapper")}),o.forEach(function(e){e.classList.add("swiper-slide")}),r=new Swiper(".swiper-container",{direction:"horizontal",loop:!1,spaceBetween:8,slidesOffsetAfter:30,slidesPerView:"auto"})):767<e&&void 0!==r&&(document.querySelectorAll(".swiper-container").forEach(function(e){e.swiper.destroy()}),r=void 0,document.querySelectorAll(".swiper-wrapper").forEach(function(e){e.removeAttribute("style")}),document.querySelectorAll(".swiper-slide").forEach(function(e){e.removeAttribute("style")}),t.forEach(function(e){e.classList.remove("swiper-container")}),n.forEach(function(e){e.classList.remove("swiper-wrapper")}),o.forEach(function(e){e.classList.remove("swiper-slide")}))}e(),window.addEventListener("resize",function(){e()})}(),function(){var t={37:1,38:1,39:1,40:1};function n(e){(e=e||window.event).preventDefault&&(e.preventDefault(),e.returnValue=!1)}function e(e){if(t[e.keyCode])return n(e),!1}window.disableScroll=function(){window.onwheel=n,window.onmousewheel=document.onmousewheel=n,window.ontouchmove=n,document.onkeydown=e},window.enableScroll=function(){window.removeEventListener&&(window.removeEventListener("DOMMouseScroll",n,!1),window.onmousewheel=document.onmousewheel=null,window.onwheel=null,window.ontouchmove=null,document.onkeydown=null)};var o,r,i,s,c,l,a,d,u=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,p=document.querySelector(".index"),w=document.querySelector(".directions-outer-wrap"),m=document.querySelector(".directions-overlay-slider"),f=m.querySelector(".swiper-wrapper"),v=m.querySelectorAll(".swiper-slide"),h=v.length,y=1/(h-1),L=document.querySelector(".directions"),g=L.querySelector(".swiper-wrapper"),_=L.querySelectorAll(".directions__item"),S=document.querySelector(".directions-bg-desktop"),E=S.querySelector(".swiper-wrapper"),b=S.querySelectorAll(".bg-block"),x=document.querySelector(".directions-content-desktop"),q=x.querySelector(".swiper-wrapper"),A=x.querySelectorAll(".directions__content"),k=document.querySelector(".directions-partners-desktop").querySelectorAll(".directions__partners"),T=document.querySelector(".directions-content-button"),C=[];[].forEach.call(A,function(e){C.push(e.getAttribute("data-href"))});var B,O,W,R,Y,$=w.getBoundingClientRect().top+window.pageYOffset,M=w.getBoundingClientRect().bottom+window.pageYOffset,I=M-$,P=window.pageYOffset>M,z=window.pageYOffset>M?h:0,D=z===h?h-1:0,N=D+1,j=!z,V=0,H=0,Q=function(){o=!1,(i=new Swiper(L,{pagination:{el:".swiper-pagination--mobile",clickable:!0}})).on("slideChangeTransitionEnd",function(){(d=this.slides[this.activeIndex].querySelector(".directions__partners"))&&d.classList.add("partners-move")}),i.on("slideChangeTransitionStart",function(){d&&d.classList.remove("partners-move")}),window.pageYOffset===$&&(d=i.slides[0].querySelector(".directions__partners"))&&d.classList.add("partners-move")},F=function(){o=!0,s=new Swiper(m,{direction:"vertical",loop:!1,autoplay:!1,spaceBetween:0,speed:400,initialSlide:z,passiveListeners:!1,preventInteractionOnTransition:!0,freeMode:!0,freeModeMomentum:!1,touchReleaseOnEdges:!0,watchSlidesProgress:!0,mousewheel:{releaseOnEdges:!0},pagination:{el:".swiper-pagination--desktop"},keyboard:{enabled:!0,onlyInViewport:!1}}),c=new Swiper(L,{direction:"vertical",loop:!1,autoplay:!1,spaceBetween:0,initialSlide:z,preventInteractionOnTransition:!0,effect:"fade"}),l=new Swiper(S,{direction:"vertical",loop:!1,autoplay:!1,spaceBetween:0,initialSlide:z,preventInteractionOnTransition:!0}),a=new Swiper(x,{direction:"vertical",loop:!1,autoplay:!1,spaceBetween:0,initialSlide:z,preventInteractionOnTransition:!0,watchSlidesProgress:!0}),s.allowSlidePrev=!1,s.allowSlideNext=!1,s.mousewheel.disable(),((s.controller.control=c).controller.control=l).controller.control=a,s.on("slideChange",function(){T.setAttribute("href",C[this.activeIndex])}),s.on("slideChangeTransitionStart",function(){B||(d.classList.remove("partners-move"),d.classList.add("partners-hide"))}),s.on("slideChangeTransitionEnd",function(){B?B=!1:(d.classList.remove("partners-hide"),(d=k[this.activeIndex]).classList.add("partners-move"))}),s.on("progress",function(){D=Math.floor(this.progress/y),N=D+1,W=this.progress/y-D,void 0!==O&&(j=this.progress>=O),j?(.6<W&&W<.8&&(d.classList.remove("partners-move"),d.classList.add("partners-hide")),.8<W&&(d.classList.contains("partners-move")&&d.classList.remove("partners-move"),d.classList.remove("partners-hide"),d=N<h?k[N]:k[h-1],B=!0,d.classList.add("partners-move"))):(.4<W&&W<.6&&(d.classList.remove("partners-move"),d.classList.add("partners-hide")),W<.4&&(d.classList.contains("partners-move")&&d.classList.remove("partners-move"),d.classList.remove("partners-hide"),d=k[D],B=!0,d.classList.add("partners-move"))),O=this.progress}),a.on("progress",function(){if(void 0!==D&&void 0!==N&&void 0!==W){var e=W<.85&&.35<W?.4:1,t=W<.85&&.35<W?-1:200;T.style.opacity=e,T.style.zIndex=t;var n=W<.8?W/1.14*375:0,o=W<.8?1.25*(1-W)-.2:0;if(this.slides[D].querySelector(".content__wrapper").style.transform="translate3d( 0, "+n+"px, 0)",this.slides[D].querySelector(".content__wrapper").style.opacity=o,N<h){var r=W<.7?0:127*(W-1),i=W<.7?0:3.34*(W-.7);this.slides[N].querySelector(".content__wrapper").style.transform="translate3d( 0, "+r+"px, 0)",this.slides[N].querySelector(".content__wrapper").style.opacity=i}}}),r=!1,T.setAttribute("href",C[z]),N=(D=z===h?h-1:0)+1,j=!z,window.pageYOffset===$&&(d=k[z]).classList.add("partners-move")},G=function(e){L.swiper.destroy(),g.removeAttribute("style"),_.forEach(function(e){e.removeAttribute("style")}),e?(m.swiper.destroy(),f.removeAttribute("style"),v.forEach(function(e){e.removeAttribute("style")}),S.swiper.destroy(),E.removeAttribute("style"),b.forEach(function(e){e.removeAttribute("style")}),x.swiper.destroy(),q.removeAttribute("style"),A.forEach(function(e){e.removeAttribute("style")}),W=O=j=N=D=d=a=l=c=s=void 0,[].forEach.call(k,function(e){e.classList.remove("partners-move"),e.classList.remove("partners-hide")}),[].forEach.call(A,function(e){e.querySelector(".content__wrapper").removeAttribute("style")}),T.removeAttribute("style")):(i=void 0,[].forEach.call(_,function(e){e.querySelector(".directions__partners").classList.remove("partners-move")}))},J=function(){window.matchMedia("(max-width: 1279px)").matches?o&&(G(!0),Q(),window.removeEventListener("scroll",Z),w.removeEventListener("wheel",K),w.removeEventListener("touchstart",U),w.removeEventListener("touchend",X),w.classList.contains("directions-outer-wrap--fixed")&&(window.scrollTo(0,$),w.classList.remove("directions-outer-wrap--fixed")),window.enableScroll(),window.matchMedia("(min-width: 768px) and (max-width: 1279px)").matches&&window.addEventListener("scroll",ee),p.style.overflowY="auto"):o||(G(!1),P=window.pageYOffset>M,z=P?h:0,F(),window.removeEventListener("scroll",ee),window.pageYOffset>$&&!P||window.pageYOffset+I<M&&P?(w.classList.add("directions-outer-wrap--fixed"),(d=k[s.activeIndex]).classList.add("partners-move"),T.setAttribute("href",C[s.activeIndex]),window.disableScroll(),s.allowSlidePrev=!0,s.allowSlideNext=!0,s.mousewheel.enable(),r=!0,w.addEventListener("wheel",K),w.addEventListener("touchstart",U),w.addEventListener("touchend",X),p.style.overflowY="hidden"):window.addEventListener("scroll",Z))};window.matchMedia("(max-width: 1279px)").matches?Q():F(),window.addEventListener("resize",function(){clearTimeout(R),R=setTimeout(J,10)});var K=function(e){r&&(e.stopPropagation(),(0<e.deltaY&&s.isEnd&&!s.animating||e.deltaY<0&&s.isBeginning&&!s.animating)&&(clearTimeout(Y),Y=setTimeout(function(){w.removeEventListener("wheel",K),w.removeEventListener("touchstart",U),w.removeEventListener("touchend",X),window.scrollTo(0,$),w.classList.remove("directions-outer-wrap--fixed"),d.classList.remove("partners-move"),window.addEventListener("scroll",Z),s.allowSlidePrev=!1,s.allowSlideNext=!1,s.mousewheel.disable(),P=s.isEnd,window.enableScroll(),r=!1,p.style.overflowY="auto"},100)))},U=function(e){V=e.changedTouches[0].screenY},X=function(e){r&&(e.stopPropagation(),((H=e.changedTouches[0].screenY)<V&&s.isEnd&&!s.animating||V<H&&s.isBeginning&&!s.animating)&&(w.removeEventListener("wheel",K),w.removeEventListener("touchstart",U),w.removeEventListener("touchend",X),window.scrollTo(0,$),w.classList.remove("directions-outer-wrap--fixed"),d.classList.remove("partners-move"),window.addEventListener("scroll",Z),s.allowSlidePrev=!1,s.allowSlideNext=!1,s.mousewheel.disable(),P=s.isEnd,window.enableScroll(),r=!1,p.style.overflowY="auto"))},Z=function(){window.matchMedia("(min-width: 1280px)").matches&&(window.pageYOffset>$&&!P||window.pageYOffset+I<M&&P)&&(r||(w.classList.add("directions-outer-wrap--fixed"),(d=k[s.activeIndex]).classList.add("partners-move"),T.setAttribute("href",C[s.activeIndex]),window.disableScroll(),s.allowSlidePrev=!0,s.allowSlideNext=!0,s.mousewheel.enable(),r=!0,w.addEventListener("wheel",K),w.addEventListener("touchstart",U),w.addEventListener("touchend",X),window.removeEventListener("scroll",Z),p.style.overflowY="hidden"))},ee=function(){window.matchMedia("(min-width: 768px) and (max-width: 1279px)").matches&&Math.abs(window.pageYOffset-$)<.1*I&&(d||(d=i.slides[0].querySelector(".directions__partners")).classList.add("partners-move"))};window.matchMedia("(min-width: 768px) and (max-width: 1279px)").matches&&window.addEventListener("scroll",ee),window.matchMedia("(min-width: 1280px)").matches&&window.addEventListener("scroll",Z);var te=document.querySelector("footer");767<u?(te.classList.add("wow"),te.classList.add("fadeIn")):u<767&&(te.classList.remove("fadeIn"),te.classList.remove("wow"))}(),(new WOW).init(),function(){var e=document.querySelectorAll(".numbers__slide"),t=0;setInterval(function(){e[t].classList.remove("numbers__slide--show"),t=(t+1)%e.length,e[t].classList.add("numbers__slide--show")},3e3)}(),function(){var e=document.querySelector(".sidebar"),t=e.querySelector(".sidebar__button");e&&t.addEventListener("click",function(){t.classList.toggle("sidebar__button--close")});var n=e.querySelector(".sidebar__nav"),o=e.querySelector(".sidebar__search"),r=e.querySelector(".controls__search"),i=function(e){e.preventDefault(),n.classList.toggle("sidebar__nav--hide"),o.classList.toggle("sidebar__search--show"),r.classList.toggle("controls__search--open")};window.onresize=function(){window.innerWidth<768?r.addEventListener("click",i):r.removeEventListener("click",i)}}(),function(){var t=document.querySelector("body"),n=document.querySelector(".modal"),o=document.querySelector(".modal__overlay"),r=document.querySelector(".modal__close-button"),i=function(e){e.preventDefault(),"click"===e.type&&(n.classList.remove("modal--show"),t.classList.remove("no-scroll")),27===e.keyCode&&(n.classList.remove("modal--show"),t.classList.remove("no-scroll")),window.removeEventListener("keydown",i),o.removeEventListener("click",i),r.removeEventListener("click",i),document.querySelector(".directions-outer-wrap--fixed")&&window.disableScroll()};t.classList.add("no-scroll"),window.addEventListener("keydown",i),o.addEventListener("click",i),r.addEventListener("click",i),document.querySelector(".directions-outer-wrap--fixed")&&window.enableScroll()}(),function(){var t=document.querySelector(".video"),e=document.querySelector(".video__player"),n=new Vimeo.Player("video__player"),o=document.querySelector(".video__slogan"),r=document.querySelector(".video__play");n.on("play",function(){e.classList.add("video__player--show"),o.classList.add("video__slogan--hide"),r.classList.add("video__play--hide")}),n.on("finish",function(){t.classList.remove("video--playing"),o.classList.remove("video__slogan--hide"),r.classList.remove("video__play--hide"),e.classList.remove("video__player--show")}),r.addEventListener("click",function(e){e.preventDefault(),t.classList.add("video--playing"),n.play()})}();
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFib3V0LW1hcC5qcyIsImFuaW1hdGVkLWJsb2NrLmpzIiwiYm9keVNjcm9sbExvY2suanMiLCJicmFuZHMuanMiLCJjYXJlZXIuanMiLCJkaXJlY3RvcnMuanMiLCJkcmFnZ2FibGUuanMiLCJmb3JtLmpzIiwiaWUtc3VwcG9ydC5qcyIsImludmVzdG9ycy5qcyIsIm1haW4uanMiLCJtZW51LmpzIiwibW9kYWwuanMiLCJ2aWRlby5qcyJdLCJuYW1lcyI6WyJwYXJ0cyIsIm1hcCIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsIm1hcHMiLCJxdWVyeVNlbGVjdG9yQWxsIiwiY2FyZHMiLCJtYXBQaW4iLCJtYXBQaW5DbG9zZSIsIm1hcERlc2NyaXB0aW9uIiwic2NyZWVuV2lkdGgiLCJ3aW5kb3ciLCJpbm5lcldpZHRoIiwiZG9jdW1lbnRFbGVtZW50IiwiY2xpZW50V2lkdGgiLCJib2R5IiwibWFwQ2FyZEhhbmRsZXIiLCJldnQiLCJmb3JFYWNoIiwiZWxlbSIsImkiLCJjbGFzc0xpc3QiLCJjb250YWlucyIsInJlbW92ZSIsInRhcmdldCIsImFjdGl2ZUVsZW1lbnQiLCJhZGQiLCJlbGVtZW50IiwicmVtb3ZlQXR0cmlidXRlIiwicmVjdCIsImdldEJvdW5kaW5nQ2xpZW50UmVjdCIsInN0eWxlIiwicmlnaHQiLCJsZWZ0Iiwib2Zmc2V0V2lkdGgiLCJ0b3AiLCJoZWlnaHQiLCJ3aWR0aCIsImJvdHRvbSIsInNldEF0dHJpYnV0ZU5TIiwiaW5pdE1hcCIsImFkZEV2ZW50TGlzdGVuZXIiLCJlbCIsImsiLCJwcmV2ZW50RGVmYXVsdCIsImNvbnRyb2xsZXIiLCJTY3JvbGxNYWdpYyIsIkNvbnRyb2xsZXIiLCJhbmltYXRlZEJsb2NrcyIsImxlbmd0aCIsIlNjZW5lIiwidHJpZ2dlckVsZW1lbnQiLCJ0cmlnZ2VySG9vayIsInNldENsYXNzVG9nZ2xlIiwicmV2ZXJzZSIsImFkZFRvIiwiJCIsInNjcm9sbExvY2siLCIkaHRtbCIsImxvY2tlZCIsInByZXZTY3JvbGwiLCJzY3JvbGxMZWZ0Iiwic2Nyb2xsVG9wIiwicHJldlN0eWxlcyIsImxvY2tTdHlsZXMiLCJvdmVyZmxvdy15IiwicG9zaXRpb24iLCJzYXZlU3R5bGVzIiwic3R5bGVTdHJzIiwic3R5bGVBdHRyIiwiYXR0ciIsInN0eWxlSGFzaCIsInNwbGl0IiwiZWFjaCIsInN0eWxlU3RyaW5nIiwia2V5VmFsdWUiLCJleHRlbmQiLCJsb2NrIiwiYXBwbGllZExvY2siLCJjc3MiLCJ1bmxvY2siLCJvbiIsImFyZ3VtZW50cyIsImpxdWVyeSIsInNpbXBsZSIsImpzIiwiJGJvZHkiLCJwcmV2aW91cyIsImxvZ28iLCJkZXNjcmlwdGlvbiIsImJyYW5kQnV0dG9uIiwiYnJhbmRMb2dvIiwiYnJhbmREZXNjcmlwdGlvbiIsInRleHRDb250ZW50Iiwic2V0VGltZW91dCIsImRpc3BsYXkiLCJteVN3aXBlciIsInVuZGVmaW5lZCIsImluaXRTd2lwZXIiLCJpdGVtcyIsInNsaWRlV3JhcHBlcnMiLCJzbGlkZXMiLCJTd2lwZXIiLCJkaXJlY3Rpb24iLCJsb29wIiwic3BhY2VCZXR3ZWVuIiwiYnJlYWtwb2ludHMiLCI3NjciLCJzbGlkZXNPZmZzZXRCZWZvcmUiLCIxMDIzIiwic3dpcGVyIiwiZGVzdHJveSIsInRoaXMiLCJqUXVlcnkiLCJyZW1vdmVBdHRyIiwiZGlyZWN0b3JzTGlzdCIsImRpcmVjdG9ycyIsImNsb3NlQWxsQWNjb3JkZW9ucyIsIml0ZW0iLCJtYXJnaW5Cb3R0b20iLCJyZXNpemVBY2NvcmRlb25zIiwiYWNjb3JkZW9uIiwib2Zmc2V0TGVmdCIsIm9ucmVzaXplIiwiY2xpZW50SGVpZ2h0IiwicmVkUGluIiwiZG90cyIsImRhdGVzIiwiYXJyb3ciLCJiYXIiLCJkcmFnZ2FibGUiLCJQbGFpbkRyYWdnYWJsZSIsImRyYWdnYWJsZUN1cnNvciIsImRyYWdnaW5nQ3Vyc29yIiwiaW5pdFRpbWVsaW5lIiwic25hcCIsIngiLCJzdGFydCIsInN0ZXAiLCJjZW50ZXIiLCJ5IiwiZW5kIiwicmVjdDEiLCJyZWN0MiIsIm4iLCJjc3NUZXh0IiwiZSIsIm9uTW92ZSIsIm9uRHJhZyIsIm5ld1Bvc2l0aW9uIiwic25hcHBlZCIsIm9uY2xpY2siLCJhbmltYXRlU2Nyb2xsVG8iLCJyZWFkeSIsIm1hc2siLCJjcmVhdGVFbGVtZW50Iiwic2xpZGVzT2Zmc2V0QWZ0ZXIiLCJzbGlkZXNQZXJWaWV3Iiwia2V5cyIsIjM3IiwiMzgiLCIzOSIsIjQwIiwiZXZlbnQiLCJyZXR1cm5WYWx1ZSIsInByZXZlbnREZWZhdWx0Rm9yU2Nyb2xsS2V5cyIsImtleUNvZGUiLCJkaXNhYmxlU2Nyb2xsIiwib253aGVlbCIsIm9ubW91c2V3aGVlbCIsIm9udG91Y2htb3ZlIiwib25rZXlkb3duIiwiZW5hYmxlU2Nyb2xsIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsImlzRGVza3RvcFN3aXBlciIsImlzU3dpcGVyQWN0aXZlIiwibW9iaWxlU3dpcGVyIiwib3ZlcmxheVN3aXBlciIsImRlc2t0b3BTd2lwZXIiLCJiZ1N3aXBlciIsImNvbnRlbnRTd2lwZXIiLCJjdXJyZW50UGFydG5lcnMiLCJtYWluUGFnZSIsInNsaWRlcnNXcmFwcGVyIiwib3ZlcmxheUNvbnRhaW5lciIsIm92ZXJsYXlXcmFwcGVyIiwib3ZlcmxheVNsaWRlcyIsInNsaWRlc051bWJlciIsImluZGV4UmF0aW8iLCJjb250YWluZXIiLCJ3cmFwcGVyIiwiYmdDb250YWluZXIiLCJiZ1dyYXBwZXIiLCJiZ1NsaWRlcyIsImNvbnRlbnRDb250YWluZXIiLCJjb250ZW50V3JhcHBlciIsImNvbnRlbnRTbGlkZXMiLCJkZXNrdG9wUGFydG5lcnMiLCJkZXNrdG9wQnV0dG9uIiwiY29udGVudERldGFpbFBhZ2VzIiwiY2FsbCIsInB1c2giLCJnZXRBdHRyaWJ1dGUiLCJpc1BhcnRuZXJzQ2hhbmdlZCIsInByZXZpb3VzUHJvZ3Jlc3MiLCJjdXJyZW50U2xpZGVQcm9ncmVzcyIsInJlc2l6ZVRpbWVyIiwibW91c2VUaW1lb3V0Iiwic2xpZGVyc1dyYXBwZXJUb3AiLCJwYWdlWU9mZnNldCIsInNsaWRlcnNXcmFwcGVyQm90dG9tIiwic2xpZGVyc1dyYXBwZXJIZWlnaHQiLCJpc0JlbG93U2xpZGVyIiwiZGVza3RvcEluaXRpYWxTbGlkZSIsInVwcGVySW5kZXgiLCJsb3dlckluZGV4Iiwic2Nyb2xsaW5nRm9yd2FyZCIsInRvdWNoU3RhcnRZIiwidG91Y2hFbmRZIiwiaW5pdE1vYmlsZVN3aXBlciIsInBhZ2luYXRpb24iLCJjbGlja2FibGUiLCJhY3RpdmVJbmRleCIsImluaXREZXNrdG9wU3dpcGVyIiwiYXV0b3BsYXkiLCJzcGVlZCIsImluaXRpYWxTbGlkZSIsInBhc3NpdmVMaXN0ZW5lcnMiLCJwcmV2ZW50SW50ZXJhY3Rpb25PblRyYW5zaXRpb24iLCJmcmVlTW9kZSIsImZyZWVNb2RlTW9tZW50dW0iLCJ0b3VjaFJlbGVhc2VPbkVkZ2VzIiwid2F0Y2hTbGlkZXNQcm9ncmVzcyIsIm1vdXNld2hlZWwiLCJyZWxlYXNlT25FZGdlcyIsImtleWJvYXJkIiwiZW5hYmxlZCIsIm9ubHlJblZpZXdwb3J0IiwiZWZmZWN0IiwiYWxsb3dTbGlkZVByZXYiLCJhbGxvd1NsaWRlTmV4dCIsImRpc2FibGUiLCJjb250cm9sIiwic2V0QXR0cmlidXRlIiwiTWF0aCIsImZsb29yIiwicHJvZ3Jlc3MiLCJkZXNrdG9wQnV0dG9uT3BhY2l0eSIsImRlc2t0b3BCdXR0b25aSW5kZXgiLCJvcGFjaXR5IiwiekluZGV4IiwiaW5uZXJVcHBlclRyYW5zbGF0ZSIsImlubmVyVXBwZXJPcGFjaXR5IiwidHJhbnNmb3JtIiwiaW5uZXJMb3dlclRyYW5zbGF0ZSIsImlubmVyTG93ZXJPcGFjaXR5IiwiZGVzdHJveVN3aXBlciIsImlzRGVza3RvcCIsInByb2Nlc3NSZXNpemUiLCJtYXRjaE1lZGlhIiwibWF0Y2hlcyIsImRlc2t0b3BTY3JvbGxIYW5kbGVyIiwiZGVza3RvcFN3aXBlcldoZWVsSGFuZGxlciIsImRlc2t0b3BTd2lwZXJUb3VjaFN0YXJ0IiwiZGVza3RvcFN3aXBlclRvdWNoRW5kIiwic2Nyb2xsVG8iLCJ0YWJsZXRTY3JvbGxIYW5kbGVyIiwib3ZlcmZsb3dZIiwiZW5hYmxlIiwiY2xlYXJUaW1lb3V0Iiwic3RvcFByb3BhZ2F0aW9uIiwiZGVsdGFZIiwiaXNFbmQiLCJhbmltYXRpbmciLCJpc0JlZ2lubmluZyIsImNoYW5nZWRUb3VjaGVzIiwic2NyZWVuWSIsImFicyIsImZvb3RlciIsIldPVyIsImluaXQiLCJjdXJyZW50U2xpZGUiLCJzZXRJbnRlcnZhbCIsInNpZGViYXIiLCJidXR0b24iLCJ0b2dnbGUiLCJzaWRlYmFyTmF2Iiwic2lkZWJhclNlYXJjaCIsImJ1dHRvblNlYXJjaCIsInRvZ2dsZVNlYXJjaCIsIm1vZGFsIiwibW9kYWxPdmVybGF5IiwiY2xvc2VNb2RhbCIsInR5cGUiLCJzZWN0aW9uIiwiZnJhbWUiLCJwbGF5ZXIiLCJWaW1lbyIsIlBsYXllciIsInNsb2dhbiIsInBsYXkiXSwibWFwcGluZ3MiOiJBQUFBLGNBRUEsV0FDQSxJQVFBQSxFQVJBQyxFQUFBQyxTQUFBQyxjQUFBLFFBQ0FDLEVBQUFGLFNBQUFHLGlCQUFBLGNBQ0FDLEVBQUFKLFNBQUFHLGlCQUFBLGFBQ0FFLEVBQUFMLFNBQUFDLGNBQUEsWUFFQUssR0FEQUQsRUFBQUosY0FBQSxPQUNBRCxTQUFBRyxpQkFBQSxvQkFDQUksRUFBQVAsU0FBQUMsY0FBQSxxQkFDQU8sRUFBQUMsT0FBQUMsWUFBQVYsU0FBQVcsZ0JBQUFDLGFBQUFaLFNBQUFhLEtBQUFELFlBR0FFLEVBQUEsU0FBQUMsR0FDQWpCLEVBQUFrQixRQUFBLFNBQUFDLEVBQUFDLEdBTUEsR0FKQUQsRUFBQUUsVUFBQUMsU0FBQSxXQUNBSCxFQUFBRSxVQUFBRSxPQUFBLFVBR0FOLEVBQUFPLFNBQUFMLEdBQUFBLElBQUFqQixTQUFBdUIsY0FBQSxDQUVBbEIsRUFBQWMsVUFBQUssSUFBQSxrQkFFQXBCLEVBQUFZLFFBQUEsU0FBQVMsR0FDQUEsRUFBQU4sVUFBQUMsU0FBQSxxQkFDQUssRUFBQU4sVUFBQUUsT0FB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QUE0SixpQkFJQXhKLEVBQUFNLFVBQUFLLElBQUEsYUFDQWYsT0FBQThCLGlCQUFBLFVBQUEyUCxHQUNBRCxFQUFBMVAsaUJBQUEsUUFBQTJQLEdBQ0FSLEVBQUFuUCxpQkFBQSxRQUFBMlAsR0FDQWxTLFNBQUFDLGNBQUEsa0NBQ0FRLE9BQUFpSyxlQTlCQSxHQ0FBLFdBQ0EsSUFBQTBILEVBQUFwUyxTQUFBQyxjQUFBLFVBQ0FvUyxFQUFBclMsU0FBQUMsY0FBQSxrQkFDQXFTLEVBQUEsSUFBQUMsTUFBQUMsT0FBQSxpQkFDQUMsRUFBQXpTLFNBQUFDLGNBQUEsa0JBQ0F5UixFQUFBMVIsU0FBQUMsY0FBQSxnQkFRQXFTLEVBQUF2TixHQUFBLE9BQUEsV0FDQXNOLEVBQUFsUixVQUFBSyxJQUFBLHVCQUNBaVIsRUFBQXRSLFVBQUFLLElBQUEsdUJBQ0FrUSxFQUFBdlEsVUFBQUssSUFBQSx1QkFRQThRLEVBQUF2TixHQUFBLFNBQUEsV0FDQXFOLEVBQUFqUixVQUFBRSxPQUFBLGtCQUNBb1IsRUFBQXRSLFVBQUFFLE9BQUEsdUJBQ0FxUSxFQUFBdlEsVUFBQUUsT0FBQSxxQkFDQWdSLEVBQUFsUixVQUFBRSxPQUFBLHlCQUdBcVEsRUFBQW5QLGlCQUFBLFFBeEJBLFNBQUF4QixHQUNBQSxFQUFBMkIsaUJBQ0EwUCxFQUFBalIsVUFBQUssSUFBQSxrQkFDQThRLEVBQUFJLFNBVkEiLCJmaWxlIjoic2NyaXB0LmpzIiwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBzdHJpY3QnO1xuXG4oZnVuY3Rpb24gKCkge1xuICB2YXIgbWFwID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm1hcCcpO1xuICB2YXIgbWFwcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5hYm91dC1tYXAnKTtcbiAgdmFyIGNhcmRzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLm1hcC1jYXJkJyk7XG4gIHZhciBtYXBQaW4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubWFwLXBpbicpO1xuICB2YXIgbWFwUGluUmV2ZXJ0ZWQgPSBtYXBQaW4ucXVlcnlTZWxlY3RvcigndXNlJyk7XG4gIHZhciBtYXBQaW5DbG9zZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ21hcC1waW5fX2J1dHRvbicpO1xuICB2YXIgbWFwRGVzY3JpcHRpb24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubWFwX19kZXNjcmlwdGlvbicpO1xuICB2YXIgc2NyZWVuV2lkdGggPSB3aW5kb3cuaW5uZXJXaWR0aCB8fCBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY2xpZW50V2lkdGggfHwgZG9jdW1lbnQuYm9keS5jbGllbnRXaWR0aDtcbiAgdmFyIHBhcnRzO1xuXG4gIHZhciBtYXBDYXJkSGFuZGxlciA9IGZ1bmN0aW9uIChldnQpIHtcbiAgICBwYXJ0cy5mb3JFYWNoKGZ1bmN0aW9uIChlbGVtLCBpKSB7XG5cbiAgICAgIGlmIChlbGVtLmNsYXNzTGlzdC5jb250YWlucygnYWN0aXZlJykpIHtcbiAgICAgICAgZWxlbS5jbGFzc0xpc3QucmVtb3ZlKCdhY3RpdmUnKTtcbiAgICAgIH1cblxuICAgICAgaWYgKGV2dC50YXJnZXQgPT09IGVsZW0gfHwgZWxlbSA9PT0gZG9jdW1lbnQuYWN0aXZlRWxlbWVudCkge1xuXG4gICAgICAgIG1hcFBpbi5jbGFzc0xpc3QuYWRkKCdtYXAtcGluLS1zaG93bicpO1xuXG4gICAgICAgIGNhcmRzLmZvckVhY2goZnVuY3Rpb24gKGVsZW1lbnQpIHtcbiAgICAgICAgICBpZiAoZWxlbWVudC5jbGFzc0xpc3QuY29udGFpbnMoJ21hcC1jYXJkLS1zaG93bicpKSB7XG4gICAgICAgICAgICBlbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoJ21hcC1jYXJkLS1zaG93bicpO1xuICAgICAgICAgICAgZWxlbWVudC5yZW1vdmVBdHRyaWJ1dGUoJ3N0eWxlJyk7XG4gICAgICAgICAgICBlbGVtZW50LmNsYXNzTGlzdC5hZGQoJ21hcC1jYXJkLS1oaWRkZW4nKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHZhciByZWN0ID0gZWxlbS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICAgICAgY2FyZHNbaV0uY2xhc3NMaXN0LmFkZCgnbWFwLWNhcmQtLXNob3duJyk7XG4gICAgICAgIGNhcmRzW2ldLmNsYXNzTGlzdC5yZW1vdmUoJ21hcC1jYXJkLS1oaWRkZW4nKTtcbiAgICAgICAgZWxlbS5jbGFzc0xpc3QuYWRkKCdhY3RpdmUnKTtcbiAgICAgICAgaWYgKHNjcmVlbldpZHRoIDwgNzY3KSB7XG4gICAgICAgICAgY2FyZHNbaV0uc3R5bGUucmlnaHQgPSAnMjBweCc7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoc2NyZWVuV2lkdGggPiA3NjgpIHtcbiAgICAgICAgICBjYXJkc1tpXS5zdHlsZS5sZWZ0ID0gcmVjdC5sZWZ0IC0gKGNhcmRzW2ldLm9mZnNldFdpZHRoIC8gMykgKyAncHgnO1xuICAgICAgICB9XG5cbiAgICAgICAgY2FyZHNbaV0uc3R5bGUudG9wID0gcmVjdC50b3AgLSBtYXAuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkudG9wIC0gY2FyZHNbaV0uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkuaGVpZ2h0IC0gNTAgKyAncHgnO1xuXG4gICAgICAgIG1hcFBpbi5jbGFzc0xpc3QuYWRkKCdtYXAtcGluLS1zaG93bicpO1xuICAgICAgICBtYXBQaW4uc3R5bGUubGVmdCA9IHJlY3QubGVmdCArIG1hcFBpbi5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS53aWR0aCAvIDQgKyAncHgnO1xuICAgICAgICBtYXBQaW4uc3R5bGUudG9wID0gcmVjdC50b3AgLSBtYXAuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkudG9wIC0gNzUgKyAncHgnO1xuXG4gICAgICAgIGlmIChzY3JlZW5XaWR0aCA+IDc2OCAmJiBjYXJkc1tpXS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS5sZWZ0IDwgbWFwRGVzY3JpcHRpb24uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkucmlnaHQgJiYgY2FyZHNbaV0uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkudG9wIDwgbWFwRGVzY3JpcHRpb24uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkuYm90dG9tIHx8IGNhcmRzW2ldLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLnRvcCA8IG1hcC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS50b3ApIHtcbiAgICAgICAgICBjYXJkc1tpXS5zdHlsZS50b3AgPSByZWN0LnRvcCAtIG1hcC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS50b3AgKyBjYXJkc1tpXS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS5oZWlnaHQgLyAyIC0gNDUgKyAncHgnO1xuICAgICAgICAgIG1hcFBpbi5zdHlsZS50b3AgPSByZWN0LnRvcCAtIG1hcC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS50b3AgKyA3NSArICdweCc7XG4gICAgICAgICAgbWFwUGluLnF1ZXJ5U2VsZWN0b3IoJ3VzZScpLnNldEF0dHJpYnV0ZU5TKCdodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rJywgJ3hsaW5rOmhyZWYnLCAnaW1nL3N2Zy1zcHJpdGUvc3ByaXRlLnN2ZyNtYXAtcGluLXJldmVydGVkJyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgbWFwUGluLnF1ZXJ5U2VsZWN0b3IoJ3VzZScpLnNldEF0dHJpYnV0ZU5TKCdodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rJywgJ3hsaW5rOmhyZWYnLCAnaW1nL3N2Zy1zcHJpdGUvc3ByaXRlLnN2ZyNtYXAtcGluJyk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KTtcbiAgfTtcblxuICBmdW5jdGlvbiBpbml0TWFwKCkge1xuXG4gICAgbWFwUGluLmNsYXNzTGlzdC5yZW1vdmUoJ21hcC1waW4tLXNob3duJyk7XG4gICAgbWFwUGluLnJlbW92ZUF0dHJpYnV0ZSgnc3R5bGUnKTtcblxuICAgIGNhcmRzLmZvckVhY2goZnVuY3Rpb24gKGVsZW1lbnQpIHtcbiAgICAgIGlmIChlbGVtZW50LmNsYXNzTGlzdC5jb250YWlucygnbWFwLWNhcmQtLXNob3duJykpIHtcbiAgICAgICAgZWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKCdtYXAtY2FyZC0tc2hvd24nKTtcbiAgICAgICAgZWxlbWVudC5yZW1vdmVBdHRyaWJ1dGUoJ3N0eWxlJyk7XG4gICAgICAgIGVsZW1lbnQuY2xhc3NMaXN0LmFkZCgnbWFwLWNhcmQtLWhpZGRlbicpO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgbWFwcy5mb3JFYWNoKGZ1bmN0aW9uIChlbGVtKSB7XG4gICAgICBpZiAoZWxlbS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS53aWR0aCA+IDApIHtcbiAgICAgICAgZWxlbS5hZGRFdmVudExpc3RlbmVyKCdtb3VzZW92ZXInLCBtYXBDYXJkSGFuZGxlcik7XG4gICAgICAgIGVsZW0uYWRkRXZlbnRMaXN0ZW5lcignbW91c2VvdXQnLCBpbml0TWFwKTtcbiAgICAgICAgcGFydHMgPSBlbGVtLnF1ZXJ5U2VsZWN0b3JBbGwoJy5tYXAtcGFydCcpO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG5cbiAgbWFwUGluQ2xvc2UuZm9yRWFjaChmdW5jdGlvbiAoZWwsIGspIHtcbiAgICBlbC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uIChldnQpIHtcbiAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgY2FyZHNba10uY2xhc3NMaXN0LnJlbW92ZSgnbWFwLWNhcmQtLXNob3duJyk7XG4gICAgICBjYXJkc1trXS5yZW1vdmVBdHRyaWJ1dGUoJ3N0eWxlJyk7XG4gICAgICBjYXJkc1trXS5jbGFzc0xpc3QuYWRkKCdtYXAtY2FyZC0taGlkZGVuJyk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGluaXRNYXAoKTtcblxuICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigncmVzaXplJywgZnVuY3Rpb24gKCkge1xuICAgIGluaXRNYXAoKTtcbiAgfSk7XG5cbn0pKCk7XG4iLCIndXNlIHN0cmljdCc7XG5cbihmdW5jdGlvbiAoKSB7XG4gIGlmICh3aW5kb3cuaW5uZXJXaWR0aCA+IDc2Nykge1xuICAgIHZhciBjb250cm9sbGVyID0gbmV3IFNjcm9sbE1hZ2ljLkNvbnRyb2xsZXIoKTtcbiAgICB2YXIgYW5pbWF0ZWRCbG9ja3MgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuYW5pbWF0ZWQtYmxvY2snKTtcblxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYW5pbWF0ZWRCbG9ja3MubGVuZ3RoOyBpKyspIHtcbiAgICAgIG5ldyBTY3JvbGxNYWdpYy5TY2VuZSh7XG4gICAgICAgICAgdHJpZ2dlckVsZW1lbnQ6IGFuaW1hdGVkQmxvY2tzW2ldLFxuICAgICAgICAgIHRyaWdnZXJIb29rOiAwLjhcbiAgICAgICAgfSlcbiAgICAgICAgLnNldENsYXNzVG9nZ2xlKGFuaW1hdGVkQmxvY2tzW2ldLCAnc2hvdycpXG4gICAgICAgIC5yZXZlcnNlKGZhbHNlKVxuICAgICAgICAuYWRkVG8oY29udHJvbGxlcik7XG4gICAgfVxuICB9XG59KSgpO1xuIiwiJ3VzZSBzdHJpY3QnO1xuXG4kLnNjcm9sbExvY2sgPSAoZnVuY3Rpb24gc2Nyb2xsTG9ja0Nsb3N1cmUoKSB7XG5cblxuICB2YXIgJGh0bWwgPSAkKCdodG1sJyk7XG4gIC8vIFN0YXRlOiB1bmxvY2tlZCBieSBkZWZhdWx0XG4gIHZhciBsb2NrZWQgPSBmYWxzZTtcbiAgLy8gU3RhdGU6IHNjcm9sbCB0byByZXZlcnQgdG9cbiAgdmFyIHByZXZTY3JvbGwgPSB7XG4gICAgc2Nyb2xsTGVmdDogJCh3aW5kb3cpLnNjcm9sbExlZnQoKSxcbiAgICBzY3JvbGxUb3A6ICQod2luZG93KS5zY3JvbGxUb3AoKVxuICB9O1xuICAvLyBTdGF0ZTogc3R5bGVzIHRvIHJldmVydCB0b1xuICB2YXIgcHJldlN0eWxlcyA9IHt9O1xuICB2YXIgbG9ja1N0eWxlcyA9IHtcbiAgICAnb3ZlcmZsb3cteSc6ICdzY3JvbGwnLFxuICAgICdwb3NpdGlvbic6ICdmaXhlZCcsXG4gICAgJ3dpZHRoJzogJzEwMCUnXG4gIH07XG5cbiAgLy8gSW5zdGFudGlhdGUgY2FjaGUgaW4gY2FzZSBzb21lb25lIHRyaWVzIHRvIHVubG9jayBiZWZvcmUgbG9ja2luZ1xuICBzYXZlU3R5bGVzKCk7XG5cbiAgLy8gU2F2ZSBjb250ZXh0J3MgaW5saW5lIHN0eWxlcyBpbiBjYWNoZVxuICBmdW5jdGlvbiBzYXZlU3R5bGVzKCkge1xuICAgIHZhciBzdHlsZUF0dHIgPSAkaHRtbC5hdHRyKCdzdHlsZScpO1xuICAgIHZhciBzdHlsZVN0cnMgPSBbXTtcbiAgICB2YXIgc3R5bGVIYXNoID0ge307XG5cbiAgICBpZiAoIXN0eWxlQXR0cikge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHN0eWxlU3RycyA9IHN0eWxlQXR0ci5zcGxpdCgvO1xccy8pO1xuXG4gICAgJC5lYWNoKHN0eWxlU3RycywgZnVuY3Rpb24gc2VyaWFsaXplU3R5bGVQcm9wKHN0eWxlU3RyaW5nKSB7XG4gICAgICBpZiAoIXN0eWxlU3RyaW5nKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgdmFyIGtleVZhbHVlID0gc3R5bGVTdHJpbmcuc3BsaXQoL1xcczpcXHMvKTtcblxuICAgICAgaWYgKGtleVZhbHVlLmxlbmd0aCA8IDIpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBzdHlsZUhhc2hba2V5VmFsdWVbMF1dID0ga2V5VmFsdWVbMV07XG4gICAgfSk7XG5cbiAgICAkLmV4dGVuZChwcmV2U3R5bGVzLCBzdHlsZUhhc2gpO1xuICB9XG5cbiAgZnVuY3Rpb24gbG9jaygpIHtcbiAgICB2YXIgYXBwbGllZExvY2sgPSB7fTtcblxuICAgIC8vIER1cGxpY2F0ZSBleGVjdXRpb24gd2lsbCBicmVhayBET00gc3RhdGVmdWxuZXNzXG4gICAgaWYgKGxvY2tlZCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIFNhdmUgc2Nyb2xsIHN0YXRlLi4uXG4gICAgcHJldlNjcm9sbCA9IHtcbiAgICAgIHNjcm9sbExlZnQ6ICQod2luZG93KS5zY3JvbGxMZWZ0KCksXG4gICAgICBzY3JvbGxUb3A6ICQod2luZG93KS5zY3JvbGxUb3AoKVxuICAgIH07XG5cbiAgICAvLyAuLi5hbmQgc3R5bGVzXG4gICAgc2F2ZVN0eWxlcygpO1xuXG4gICAgLy8gQ29tcG9zZSBvdXIgYXBwbGllZCBDU1NcbiAgICAkLmV4dGVuZChhcHBsaWVkTG9jaywgbG9ja1N0eWxlcywge1xuICAgICAgLy8gQW5kIGFwcGx5IHNjcm9sbCBzdGF0ZSBhcyBzdHlsZXNcbiAgICAgICdsZWZ0JzogLXByZXZTY3JvbGwuc2Nyb2xsTGVmdCArICdweCcsXG4gICAgICAndG9wJzogLXByZXZTY3JvbGwuc2Nyb2xsVG9wICsgJ3B4J1xuICAgIH0pO1xuXG4gICAgLy8gVGhlbiBsb2NrIHN0eWxlcy4uLlxuICAgICRodG1sLmNzcyhhcHBsaWVkTG9jayk7XG5cbiAgICAvLyAuLi5hbmQgc2Nyb2xsIHN0YXRlXG4gICAgJCh3aW5kb3cpXG4gICAgICAuc2Nyb2xsTGVmdCgwKVxuICAgICAgLnNjcm9sbFRvcCgwKTtcblxuICAgIGxvY2tlZCA9IHRydWU7XG4gIH1cblxuICBmdW5jdGlvbiB1bmxvY2soKSB7XG4gICAgLy8gRHVwbGljYXRlIGV4ZWN1dGlvbiB3aWxsIGJyZWFrIERPTSBzdGF0ZWZ1bG5lc3NcbiAgICBpZiAoIWxvY2tlZCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIFJldmVydCBzdHlsZXNcbiAgICAkaHRtbC5hdHRyKCdzdHlsZScsICQoJzx4PicpLmNzcyhwcmV2U3R5bGVzKS5hdHRyKCdzdHlsZScpIHx8ICcnKTtcblxuICAgIC8vIFJldmVydCBzY3JvbGwgdmFsdWVzXG4gICAgJCh3aW5kb3cpXG4gICAgICAuc2Nyb2xsTGVmdChwcmV2U2Nyb2xsLnNjcm9sbExlZnQpXG4gICAgICAuc2Nyb2xsVG9wKHByZXZTY3JvbGwuc2Nyb2xsVG9wKTtcblxuICAgIGxvY2tlZCA9IGZhbHNlO1xuICB9XG5cbiAgcmV0dXJuIGZ1bmN0aW9uIHNjcm9sbExvY2sob24pIHtcbiAgICAvLyBJZiBhbiBhcmd1bWVudCBpcyBwYXNzZWQsIGxvY2sgb3IgdW5sb2NrIGRlcGVuZGluZyBvbiB0cnV0aGluZXNzXG4gICAgaWYgKGFyZ3VtZW50cy5sZW5ndGgpIHtcbiAgICAgIGlmIChvbikge1xuICAgICAgICBsb2NrKCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB1bmxvY2soKTtcbiAgICAgIH1cbiAgICB9IGVsc2UgeyAvLyBPdGhlcndpc2UsIHRvZ2dsZVxuICAgICAgaWYgKGxvY2tlZCkge1xuICAgICAgICB1bmxvY2soKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGxvY2soKTtcbiAgICAgIH1cbiAgICB9XG4gIH07XG59KCkpO1xuanF1ZXJ5LnNjcm9sbExvY2suc2ltcGxlLmpzXG4kLnNjcm9sbExvY2sgPSAoZnVuY3Rpb24gc2Nyb2xsTG9ja1NpbXBsZSgpIHtcbiAgdmFyIGxvY2tlZCA9IGZhbHNlO1xuICB2YXIgJGJvZHk7XG4gIHZhciBwcmV2aW91cztcblxuICBmdW5jdGlvbiBsb2NrKCkge1xuICAgIGlmICghJGJvZHkpIHtcbiAgICAgICRib2R5ID0gJCgnYm9keScpO1xuICAgIH1cblxuICAgIHByZXZpb3VzID0gJGJvZHkuY3NzKCdvdmVyZmxvdycpO1xuXG4gICAgJGJvZHkuY3NzKCdvdmVyZmxvdycsICdoaWRkZW4nKTtcblxuICAgIGxvY2tlZCA9IHRydWU7XG4gIH1cblxuICBmdW5jdGlvbiB1bmxvY2soKSB7XG4gICAgJGJvZHkuY3NzKCdvdmVyZmxvdycsIHByZXZpb3VzKTtcblxuICAgIGxvY2tlZCA9IGZhbHNlO1xuICB9XG5cbiAgcmV0dXJuIGZ1bmN0aW9uIHNjcm9sbExvY2sob24pIHtcbiAgICAvLyBJZiBhbiBhcmd1bWVudCBpcyBwYXNzZWQsIGxvY2sgb3IgdW5sb2NrIGRlcGVuZGluZyBvbiB0cnV0aGluZXNzXG4gICAgaWYgKGFyZ3VtZW50cy5sZW5ndGgpIHtcbiAgICAgIGlmIChvbikge1xuICAgICAgICBsb2NrKCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB1bmxvY2soKTtcbiAgICAgIH1cbiAgICB9IGVsc2UgeyAvLyBPdGhlcndpc2UsIHRvZ2dsZVxuICAgICAgaWYgKGxvY2tlZCkge1xuICAgICAgICB1bmxvY2soKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGxvY2soKTtcbiAgICAgIH1cbiAgICB9XG4gIH07XG59KCkpO1xuIiwiJ3VzZSBzdHJpY3QnO1xuXG4oZnVuY3Rpb24gKCkge1xuICB2YXIgYnJhbmRCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuYnJhbmRfX2J1dHRvbicpO1xuICB2YXIgYnJhbmRMb2dvID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmJyYW5kX19sb2dvJyk7XG4gIHZhciBicmFuZERlc2NyaXB0aW9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmJyYW5kX19kZXNjcmlwdGlvbicpO1xuXG4gIHZhciBicmFuZEJ1dHRvbkhhbmRsZXIgPSBmdW5jdGlvbiAoYnV0dG9uLCBsb2dvLCBkZXNjcmlwdGlvbikge1xuICAgIGJ1dHRvbi5mb3JFYWNoKGZ1bmN0aW9uIChlbGVtLCBpKSB7XG4gICAgICBlbGVtLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAoZWxlbS50ZXh0Q29udGVudCA9PT0gJ9Cf0L7QtNGA0L7QsdC90LXQtScpIHtcbiAgICAgICAgICBlbGVtLnRleHRDb250ZW50ID0gJ9CX0LDQutGA0YvRgtGMJztcbiAgICAgICAgICBlbGVtLmNsYXNzTGlzdC5yZW1vdmUoJ2JyYW5kX19idXR0b24tLW9wZW4nKTtcblxuICAgICAgICAgIGxvZ29baV0uY2xhc3NMaXN0LnJlbW92ZSgnYnJhbmRfX2xvZ28tLWZhZGUtaW4nKTtcbiAgICAgICAgICBsb2dvW2ldLmNsYXNzTGlzdC5hZGQoJ2JyYW5kX19sb2dvLS1oaWRkZW4nKTtcblxuICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgbG9nb1tpXS5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XG4gICAgICAgICAgICBkZXNjcmlwdGlvbltpXS5jbGFzc0xpc3QucmVtb3ZlKCdicmFuZF9fZGVzY3JpcHRpb24tLWhpZGRlbicpO1xuICAgICAgICAgICAgZGVzY3JpcHRpb25baV0uY2xhc3NMaXN0LmFkZCgnYnJhbmRfX2Rlc2NyaXB0aW9uLS1zaG93bicpO1xuICAgICAgICAgIH0sIDUwMCk7XG5cbiAgICAgICAgfSBlbHNlIGlmIChlbGVtLnRleHRDb250ZW50ID09PSAn0JfQsNC60YDRi9GC0YwnKSB7XG4gICAgICAgICAgZWxlbS50ZXh0Q29udGVudCA9ICfQn9C+0LTRgNC+0LHQvdC10LUnO1xuICAgICAgICAgIGVsZW0uY2xhc3NMaXN0LmFkZCgnYnJhbmRfX2J1dHRvbi0tb3BlbicpO1xuICAgICAgICAgIGRlc2NyaXB0aW9uW2ldLmNsYXNzTGlzdC5hZGQoJ2JyYW5kX19kZXNjcmlwdGlvbi0tZmFkZS1vdXQnKTtcblxuICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgZGVzY3JpcHRpb25baV0uY2xhc3NMaXN0LnJlbW92ZSgnYnJhbmRfX2Rlc2NyaXB0aW9uLS1zaG93bicpO1xuICAgICAgICAgICAgZGVzY3JpcHRpb25baV0uY2xhc3NMaXN0LmFkZCgnYnJhbmRfX2Rlc2NyaXB0aW9uLS1oaWRkZW4nKTtcbiAgICAgICAgICAgIGRlc2NyaXB0aW9uW2ldLmNsYXNzTGlzdC5yZW1vdmUoJ2JyYW5kX19kZXNjcmlwdGlvbi0tZmFkZS1vdXQnKTtcbiAgICAgICAgICAgIGxvZ29baV0ucmVtb3ZlQXR0cmlidXRlKFwic3R5bGVcIik7XG4gICAgICAgICAgICBsb2dvW2ldLmNsYXNzTGlzdC5yZW1vdmUoJ2JyYW5kX19sb2dvLS1oaWRkZW4nKTtcbiAgICAgICAgICAgIGxvZ29baV0uY2xhc3NMaXN0LmFkZCgnYnJhbmRfX2xvZ28tLWZhZGUtaW4nKTtcbiAgICAgICAgICB9LCA1MDApO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfTtcbiAgYnJhbmRCdXR0b25IYW5kbGVyKGJyYW5kQnV0dG9uLCBicmFuZExvZ28sIGJyYW5kRGVzY3JpcHRpb24pO1xufSkoKTtcblxuXG4oZnVuY3Rpb24gKCkge1xuXG4gIHZhciBteVN3aXBlciA9IHVuZGVmaW5lZDtcblxuICBmdW5jdGlvbiBpbml0U3dpcGVyKCkge1xuICAgIHZhciBzY3JlZW5XaWR0aCA9IHdpbmRvdy5pbm5lcldpZHRoIHx8IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jbGllbnRXaWR0aCB8fCBkb2N1bWVudC5ib2R5LmNsaWVudFdpZHRoO1xuICAgIHZhciBpdGVtcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5icmFuZHMtd3JhcHBlcicpO1xuICAgIHZhciBzbGlkZVdyYXBwZXJzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmJyYW5kc19fY29udGFpbmVyJyk7XG4gICAgdmFyIHNsaWRlcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5icmFuZCcpO1xuXG4gICAgaWYgKHNjcmVlbldpZHRoIDwgMTAyMyAmJiBteVN3aXBlciA9PT0gdW5kZWZpbmVkKSB7XG5cbiAgICAgIGl0ZW1zLmZvckVhY2goZnVuY3Rpb24gKGVsZW0pIHtcbiAgICAgICAgZWxlbS5jbGFzc0xpc3QuYWRkKCdzd2lwZXItY29udGFpbmVyJyk7XG4gICAgICB9KTtcblxuICAgICAgc2xpZGVXcmFwcGVycy5mb3JFYWNoKGZ1bmN0aW9uIChlbGVtKSB7XG4gICAgICAgIGVsZW0uY2xhc3NMaXN0LmFkZCgnc3dpcGVyLXdyYXBwZXInKTtcbiAgICAgIH0pO1xuXG4gICAgICBzbGlkZXMuZm9yRWFjaChmdW5jdGlvbiAoZWxlbSkge1xuICAgICAgICBlbGVtLmNsYXNzTGlzdC5hZGQoJ3N3aXBlci1zbGlkZScpO1xuICAgICAgfSk7XG5cbiAgICAgIG15U3dpcGVyID0gbmV3IFN3aXBlcignLnN3aXBlci1jb250YWluZXInLCB7XG4gICAgICAgIGRpcmVjdGlvbjogJ2hvcml6b250YWwnLFxuICAgICAgICBsb29wOiBmYWxzZSxcbiAgICAgICAgc3BhY2VCZXR3ZWVuOiAxMCxcbiAgICAgICAgLy8gUmVzcG9uc2l2ZSBicmVha3BvaW50c1xuICAgICAgICBicmVha3BvaW50czoge1xuICAgICAgICAgIC8vIHdoZW4gd2luZG93IHdpZHRoIGlzIDw9IDc2N3B4XG4gICAgICAgICAgNzY3OiB7XG4gICAgICAgICAgICBzcGFjZUJldHdlZW46IDEwLFxuICAgICAgICAgICAgc2xpZGVzT2Zmc2V0QmVmb3JlOiAzMCxcbiAgICAgICAgICAgIHdpZHRoOiAyNjAsXG4gICAgICAgICAgfSxcbiAgICAgICAgICAvLyB3aGVuIHdpbmRvdyB3aWR0aCBpcyA8PSA0ODBweFxuICAgICAgICAgIDEwMjM6IHtcbiAgICAgICAgICAgIHNwYWNlQmV0d2VlbjogMjAsXG4gICAgICAgICAgICBzbGlkZXNPZmZzZXRCZWZvcmU6IDYwLFxuICAgICAgICAgICAgd2lkdGg6IDU0MCxcbiAgICAgICAgICB9LFxuICAgICAgICB9LFxuICAgICAgfSk7XG4gICAgfSBlbHNlIGlmIChzY3JlZW5XaWR0aCA+IDEwMjMgJiYgbXlTd2lwZXIgIT09IHVuZGVmaW5lZCkge1xuXG4gICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuc3dpcGVyLWNvbnRhaW5lcicpLmZvckVhY2goZnVuY3Rpb24gKGVsZW0pIHtcbiAgICAgICAgZWxlbS5zd2lwZXIuZGVzdHJveSgpO1xuICAgICAgfSk7XG5cbiAgICAgIG15U3dpcGVyID0gdW5kZWZpbmVkO1xuXG4gICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuc3dpcGVyLXdyYXBwZXInKS5mb3JFYWNoKGZ1bmN0aW9uIChlbGVtKSB7XG4gICAgICAgIGVsZW0ucmVtb3ZlQXR0cmlidXRlKCdzdHlsZScpO1xuICAgICAgfSk7XG4gICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuc3dpcGVyLXNsaWRlJykuZm9yRWFjaChmdW5jdGlvbiAoZWxlbSkge1xuICAgICAgICBlbGVtLnJlbW92ZUF0dHJpYnV0ZSgnc3R5bGUnKTtcbiAgICAgIH0pO1xuXG4gICAgICBpdGVtcy5mb3JFYWNoKGZ1bmN0aW9uIChlbGVtKSB7XG4gICAgICAgIGVsZW0uY2xhc3NMaXN0LnJlbW92ZSgnc3dpcGVyLWNvbnRhaW5lcicpO1xuICAgICAgfSk7XG5cbiAgICAgIHNsaWRlV3JhcHBlcnMuZm9yRWFjaChmdW5jdGlvbiAoZWxlbSkge1xuICAgICAgICBlbGVtLmNsYXNzTGlzdC5yZW1vdmUoJ3N3aXBlci13cmFwcGVyJyk7XG4gICAgICB9KTtcblxuICAgICAgc2xpZGVzLmZvckVhY2goZnVuY3Rpb24gKGVsZW0pIHtcbiAgICAgICAgZWxlbS5jbGFzc0xpc3QucmVtb3ZlKCdzd2lwZXItc2xpZGUnKTtcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxuXG4gIGluaXRTd2lwZXIoKTtcblxuICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigncmVzaXplJywgZnVuY3Rpb24gKCkge1xuICAgIGluaXRTd2lwZXIoKTtcbiAgfSk7XG59KSgpO1xuIiwiJ3VzZSBzdHJpY3QnO1xuXG4oZnVuY3Rpb24gKCkge1xuXG4gIHZhciBteVN3aXBlciA9IHVuZGVmaW5lZDtcblxuICBmdW5jdGlvbiBpbml0U3dpcGVyKCkge1xuICAgIHZhciBzY3JlZW5XaWR0aCA9ICQod2luZG93KS53aWR0aCgpO1xuICAgIHZhciBpdGVtcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5jYXJlZXItcGVvcGxlX19zbGlkZXInKTtcbiAgICB2YXIgc2xpZGVXcmFwcGVycyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5jYXJlZXItcGVvcGxlX193cmFwcGVyJyk7XG4gICAgdmFyIHNsaWRlcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5jYXJlZXItcGVvcGxlX19pdGVtJyk7XG5cbiAgICBpZiAoc2NyZWVuV2lkdGggPCAxMDIzICYmIG15U3dpcGVyID09IHVuZGVmaW5lZCkge1xuXG4gICAgICBpdGVtcy5mb3JFYWNoKGZ1bmN0aW9uIChlbGVtKSB7XG4gICAgICAgIGVsZW0uY2xhc3NMaXN0LmFkZCgnc3dpcGVyLWNvbnRhaW5lcicpO1xuICAgICAgfSk7XG5cbiAgICAgIHNsaWRlV3JhcHBlcnMuZm9yRWFjaChmdW5jdGlvbiAoZWxlbSkge1xuICAgICAgICBlbGVtLmNsYXNzTGlzdC5hZGQoJ3N3aXBlci13cmFwcGVyJyk7XG4gICAgICB9KTtcblxuICAgICAgc2xpZGVzLmZvckVhY2goZnVuY3Rpb24gKGVsZW0pIHtcbiAgICAgICAgZWxlbS5jbGFzc0xpc3QuYWRkKCdzd2lwZXItc2xpZGUnKTtcbiAgICAgIH0pO1xuXG4gICAgICBteVN3aXBlciA9IG5ldyBTd2lwZXIoJy5zd2lwZXItY29udGFpbmVyJywge1xuICAgICAgICBkaXJlY3Rpb246ICdob3Jpem9udGFsJyxcbiAgICAgICAgbG9vcDogZmFsc2UsXG4gICAgICAgIC8vIHNwYWNlQmV0d2VlbjogOCxcbiAgICAgICAgLy8gc2xpZGVzT2Zmc2V0QmVmb3JlOiAzMCxcbiAgICAgICAgLy8gd2lkdGg6IDI2MCxcbiAgICAgIH0pO1xuICAgIH0gZWxzZSBpZiAoc2NyZWVuV2lkdGggPiAxMDIzICYmIG15U3dpcGVyICE9IHVuZGVmaW5lZCkge1xuXG4gICAgICAkKCcuc3dpcGVyLWNvbnRhaW5lcicpLmVhY2goZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLnN3aXBlci5kZXN0cm95KCk7XG4gICAgICB9KTtcblxuICAgICAgbXlTd2lwZXIgPSB1bmRlZmluZWQ7XG5cbiAgICAgIGl0ZW1zLmZvckVhY2goZnVuY3Rpb24gKGVsZW0pIHtcbiAgICAgICAgZWxlbS5jbGFzc0xpc3QucmVtb3ZlKCdzd2lwZXItY29udGFpbmVyJyk7XG4gICAgICB9KTtcblxuICAgICAgc2xpZGVXcmFwcGVycy5mb3JFYWNoKGZ1bmN0aW9uIChlbGVtKSB7XG4gICAgICAgIGVsZW0uY2xhc3NMaXN0LnJlbW92ZSgnc3dpcGVyLXdyYXBwZXInKTtcbiAgICAgIH0pO1xuXG4gICAgICBzbGlkZXMuZm9yRWFjaChmdW5jdGlvbiAoZWxlbSkge1xuICAgICAgICBlbGVtLmNsYXNzTGlzdC5yZW1vdmUoJ3N3aXBlci1zbGlkZScpO1xuICAgICAgfSk7XG5cbiAgICAgIGpRdWVyeSgnLnN3aXBlci13cmFwcGVyJykucmVtb3ZlQXR0cignc3R5bGUnKTtcbiAgICAgIGpRdWVyeSgnLnN3aXBlci1zbGlkZScpLnJlbW92ZUF0dHIoJ3N0eWxlJyk7XG4gICAgfVxuICB9XG5cbiAgLy9Td2lwZXIgcGx1Z2luIGluaXRpYWxpemF0aW9uXG5cbiAgaW5pdFN3aXBlcigpO1xuXG4gIC8vU3dpcGVyIHBsdWdpbiBpbml0aWFsaXphdGlvbiBvbiB3aW5kb3cgcmVzaXplXG5cbiAgJCh3aW5kb3cpLm9uKCdyZXNpemUnLCBmdW5jdGlvbiAoKSB7XG4gICAgaW5pdFN3aXBlcigpO1xuICB9KTtcblxuICBpZiAod2luZG93LmlubmVyV2lkdGggPiA3NjcpIHtcbiAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuY2FyZWVyLWpvaW5fX3RpdGxlJykudGV4dENvbnRlbnQgPSAn0JrQsNC6INC/0YDQuNGB0L7QtdC00LjQvdC40YLRjNGB0Y8g0Log0L3QsNGI0LXQuSDQutC+0LzQsNC90LTQtSc7XG4gIH1cbn0pKCk7XG4iLCIndXNlIHN0cmljdCc7XG5cbihmdW5jdGlvbiAoKSB7XG5cbiAgdmFyIGRpcmVjdG9yc0xpc3QgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuZGlyZWN0b3JzX19saXN0Jyk7XG4gIHZhciBkaXJlY3RvcnMgPSBkaXJlY3RvcnNMaXN0LnF1ZXJ5U2VsZWN0b3JBbGwoJy5kaXJlY3RvcnNfX2l0ZW0nKTtcblxuICB2YXIgY2xvc2VBbGxBY2NvcmRlb25zID0gZnVuY3Rpb24gKCkge1xuICAgIGRpcmVjdG9ycy5mb3JFYWNoKGZ1bmN0aW9uIChpdGVtKSB7XG4gICAgICBpdGVtLmNsYXNzTGlzdC5yZW1vdmUoJ2RpcmVjdG9yc19faXRlbS0tb3BlbmVkJyk7XG4gICAgICBpdGVtLnN0eWxlLm1hcmdpbkJvdHRvbSA9ICdpbml0aWFsJztcbiAgICB9KTtcbiAgfTtcblxuICB2YXIgcmVzaXplQWNjb3JkZW9ucyA9IGZ1bmN0aW9uICgpIHtcbiAgICBkaXJlY3RvcnMuZm9yRWFjaChmdW5jdGlvbiAoaXRlbSkge1xuICAgICAgdmFyIGFjY29yZGVvbiA9IGl0ZW0ucXVlcnlTZWxlY3RvcignLmRpcmVjdG9yc19fYWNjb3JkZW9uJyk7XG4gICAgICBhY2NvcmRlb24uc3R5bGUubGVmdCA9IC1pdGVtLm9mZnNldExlZnQgKyAncHgnO1xuICAgICAgYWNjb3JkZW9uLnN0eWxlLndpZHRoID0gZGlyZWN0b3JzTGlzdC5vZmZzZXRXaWR0aCArICdweCc7XG4gICAgfSk7XG4gIH07XG5cbiAgcmVzaXplQWNjb3JkZW9ucygpO1xuXG4gIHdpbmRvdy5vbnJlc2l6ZSA9IHJlc2l6ZUFjY29yZGVvbnM7XG5cbiAgZGlyZWN0b3JzLmZvckVhY2goZnVuY3Rpb24gKGl0ZW0pIHtcbiAgICB2YXIgYXZhdGFyID0gaXRlbS5xdWVyeVNlbGVjdG9yKCcuZGlyZWN0b3JzX19hdmF0YXInKTtcbiAgICBhdmF0YXIuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbiAoZXZ0KSB7XG4gICAgICBldnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgIGNsb3NlQWxsQWNjb3JkZW9ucygpO1xuICAgICAgaXRlbS5jbGFzc0xpc3QuYWRkKCdkaXJlY3RvcnNfX2l0ZW0tLW9wZW5lZCcpO1xuICAgICAgdmFyIGFjY29yZGVvbiA9IGl0ZW0ucXVlcnlTZWxlY3RvcignLmRpcmVjdG9yc19fYWNjb3JkZW9uJyk7XG4gICAgICBpdGVtLnN0eWxlLm1hcmdpbkJvdHRvbSA9IGFjY29yZGVvbi5jbGllbnRIZWlnaHQgKyAncHgnO1xuICAgICAgdmFyIGNsb3NlQnV0dG9uID0gaXRlbS5xdWVyeVNlbGVjdG9yKCcuZGlyZWN0b3JzX19jbG9zZScpO1xuICAgICAgY2xvc2VCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGNsb3NlQWxsQWNjb3JkZW9ucygpO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH0pO1xuXG59KSgpO1xuIiwiJ3VzZSBzdHJpY3QnO1xuXG4oZnVuY3Rpb24gKCkge1xuICB2YXIgcmVkUGluID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnJlZC1kb3QnKTtcbiAgdmFyIHNjcmVlbldpZHRoID0gd2luZG93LmlubmVyV2lkdGggfHwgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNsaWVudFdpZHRoIHx8IGRvY3VtZW50LmJvZHkuY2xpZW50V2lkdGg7XG5cbiAgdmFyIGRvdHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcudGltZWxpbmUtZG90Jyk7XG4gIHZhciBkYXRlcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy50aW1lbGluZS1kYXRlJyk7XG4gIHZhciBjYXJkcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy50aW1lbGluZV9fY2FyZHMnKTtcbiAgdmFyIGFycm93ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnRpbWVsaW5lX19hcnJvdycpO1xuICB2YXIgYmFyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmJhci13cmFwcGVyJyk7XG5cbiAgdmFyIGRyYWdnYWJsZSA9IG5ldyBQbGFpbkRyYWdnYWJsZShyZWRQaW4pO1xuXG4gIFBsYWluRHJhZ2dhYmxlLmRyYWdnYWJsZUN1cnNvciA9ICdncmFiJztcbiAgUGxhaW5EcmFnZ2FibGUuZHJhZ2dpbmdDdXJzb3IgPSAnZ3JhYmJpbmcnO1xuXG4gIHZhciBpbml0VGltZWxpbmUgPSBmdW5jdGlvbiAoKSB7XG4gICAgaWYgKHNjcmVlbldpZHRoIDwgNzY3KSB7XG4gICAgICBkcmFnZ2FibGUuc25hcCA9IHt4OiB7c3RhcnQ6IDY1LCBzdGVwOiA2OSwgY2VudGVyOiB0cnVlfSwgeTogMH07XG4gICAgfSBlbHNlIGlmIChzY3JlZW5XaWR0aCA+IDc2NyAmJiBzY3JlZW5XaWR0aCA8IDEwMjMpIHtcbiAgICAgIGRyYWdnYWJsZS5zbmFwID0ge3g6IHtzdGFydDogNjUsIHN0ZXA6IDY5LCBjZW50ZXI6IHRydWV9LCB5OiAwfTtcbiAgICB9IGVsc2UgaWYgKHNjcmVlbldpZHRoID4gMTAyMyAmJiBzY3JlZW5XaWR0aCA8IDE0MzkpIHtcbiAgICAgIGRyYWdnYWJsZS5zbmFwID0ge3g6IHtzdGFydDogNTUsIHN0ZXA6IDY5LCBjZW50ZXI6IHRydWUsIGVuZDogZG90cy5sZW5ndGggKiA2OSArIDMwfSwgeTogMH07XG4gICAgfSBlbHNlIGlmIChzY3JlZW5XaWR0aCA+IDE0MzkpIHtcbiAgICAgIGRyYWdnYWJsZS5zbmFwID0ge3g6IHtzdGFydDogMTA1LCBzdGVwOiA3NywgY2VudGVyOiB0cnVlLCBlbmQ6IGRvdHMubGVuZ3RoICogNzcgKyAzMH0sIHk6IDB9O1xuICAgIH1cblxuICAgIGRvdHMuZm9yRWFjaChmdW5jdGlvbiAoZWxlbSwgaSkge1xuICAgICAgdmFyIHJlY3QxID0gcmVkUGluLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgICAgdmFyIHJlY3QyID0gZWxlbS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICAgIGlmIChyZWN0MS5sZWZ0ID4gcmVjdDIubGVmdCAtIDE1ICYmIHJlY3QxLmxlZnQgPCByZWN0Mi5sZWZ0ICsgNSkge1xuICAgICAgICBkYXRlcy5mb3JFYWNoKGZ1bmN0aW9uIChlbCwgbikge1xuICAgICAgICAgIGVsLnJlbW92ZUF0dHJpYnV0ZSgnc3R5bGUnKTtcbiAgICAgICAgICBjYXJkc1tuXS5zdHlsZS5jc3NUZXh0ID0gJ2Rpc3BsYXk6IG5vbmU7JztcbiAgICAgICAgfSk7XG4gICAgICAgIGRhdGVzW2ldLnN0eWxlLmNzc1RleHQgPSAnY29sb3I6IHJnYmEoMjA4LCAyLCAyNywgMSk7JztcbiAgICAgICAgY2FyZHNbaV0uc3R5bGUuY3NzVGV4dCA9ICdkaXNwbGF5OiBmbGV4Oyc7XG4gICAgICB9XG4gICAgfSk7XG4gIH07XG5cbiAgZGF0ZXMuZm9yRWFjaChmdW5jdGlvbiAoZSwgaSkge1xuICAgIGUuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbiAoKSB7XG4gICAgICBpZiAoc2NyZWVuV2lkdGggPCAxMDIzKSB7XG4gICAgICAgIHJlZFBpbi5zdHlsZS5jc3NUZXh0ID0gJ3RyYW5zZm9ybTogdHJhbnNsYXRlKCcgKyAoZG90c1tpXS5vZmZzZXRMZWZ0IC0gNjUpICsgJ3B4LCAwcHgpOyc7XG4gICAgICB9IGVsc2UgaWYgKHNjcmVlbldpZHRoID4gMTAyMyAmJiBzY3JlZW5XaWR0aCA8IDE0MzkpIHtcbiAgICAgICAgcmVkUGluLnN0eWxlLmNzc1RleHQgPSAndHJhbnNmb3JtOiB0cmFuc2xhdGUoJyArIChkb3RzW2ldLm9mZnNldExlZnQgLSA1NSkgKyAncHgsIDBweCk7JztcbiAgICAgIH0gZWxzZSBpZiAoc2NyZWVuV2lkdGggPiAxNDM5KSB7XG4gICAgICAgIHJlZFBpbi5zdHlsZS5jc3NUZXh0ID0gJ3RyYW5zZm9ybTogdHJhbnNsYXRlKCcgKyAoZG90c1tpXS5vZmZzZXRMZWZ0IC0gMTA1KSArICdweCwgMHB4KTsnO1xuICAgICAgfVxuICAgICAgZHJhZ2dhYmxlLnBvc2l0aW9uKCk7XG4gICAgICBpbml0VGltZWxpbmUoKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZG90cy5mb3JFYWNoKGZ1bmN0aW9uIChlbCwgaSkge1xuICAgIGVsLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xuICAgICAgaWYgKHNjcmVlbldpZHRoIDwgMTAyMykge1xuICAgICAgICByZWRQaW4uc3R5bGUuY3NzVGV4dCA9ICd0cmFuc2Zvcm06IHRyYW5zbGF0ZSgnICsgKGRvdHNbaV0ub2Zmc2V0TGVmdCAtIDY3KSArICdweCwgMHB4KTsnO1xuICAgICAgfSBlbHNlIGlmIChzY3JlZW5XaWR0aCA+IDEwMjMgJiYgc2NyZWVuV2lkdGggPCAxNDM5KSB7XG4gICAgICAgIHJlZFBpbi5zdHlsZS5jc3NUZXh0ID0gJ3RyYW5zZm9ybTogdHJhbnNsYXRlKCcgKyAoZG90c1tpXS5vZmZzZXRMZWZ0IC0gNTcpICsgJ3B4LCAwcHgpOyc7XG4gICAgICB9IGVsc2UgaWYgKHNjcmVlbldpZHRoID4gMTQzOSkge1xuICAgICAgICByZWRQaW4uc3R5bGUuY3NzVGV4dCA9ICd0cmFuc2Zvcm06IHRyYW5zbGF0ZSgnICsgKGRvdHNbaV0ub2Zmc2V0TGVmdCAtIDEwNykgKyAncHgsIDBweCk7JztcbiAgICAgIH1cbiAgICAgIGRyYWdnYWJsZS5wb3NpdGlvbigpO1xuICAgICAgaW5pdFRpbWVsaW5lKCk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGluaXRUaW1lbGluZSgpO1xuXG4gIGRyYWdnYWJsZS5vbk1vdmUgPSBpbml0VGltZWxpbmU7XG4gIGRyYWdnYWJsZS5vbkRyYWcgPSBmdW5jdGlvbiAobmV3UG9zaXRpb24pIHtcbiAgICByZXR1cm4gISFuZXdQb3NpdGlvbi5zbmFwcGVkO1xuICB9O1xuXG4gIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdyZXNpemUnLCBmdW5jdGlvbiAoKSB7XG4gICAgaW5pdFRpbWVsaW5lKCk7XG4gIH0pO1xuXG4gIGFycm93Lm9uY2xpY2sgPSBmdW5jdGlvbiAoKSB7XG4gICAgd2luZG93LmFuaW1hdGVTY3JvbGxUbyhiYXIuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkucmlnaHQpO1xuICB9O1xufSkoKTtcbiIsIid1c2Ugc3RyaWN0JztcblxuJChkb2N1bWVudCkucmVhZHkoZnVuY3Rpb24gKCkge1xuICAkKCcjZmVlZGJhY2stZm9ybV9fdGVsJykubWFzaygnKzkgKDk5OSkgOTk5LTk5OTknKTtcbn0pO1xuIiwiJ3VzZSBzdHJpY3QnO1xuXG4oZnVuY3Rpb24gKCkge1xuICBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdtYWluJyk7XG59KSgpO1xuIiwiJ3VzZSBzdHJpY3QnO1xuXG4oZnVuY3Rpb24gKCkge1xuICB2YXIgbXlTd2lwZXIgPSB1bmRlZmluZWQ7XG5cbiAgZnVuY3Rpb24gaW5pdFN3aXBlcigpIHtcbiAgICB2YXIgc2NyZWVuV2lkdGggPSB3aW5kb3cuaW5uZXJXaWR0aCB8fCBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY2xpZW50V2lkdGggfHwgZG9jdW1lbnQuYm9keS5jbGllbnRXaWR0aDtcbiAgICB2YXIgaXRlbXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuaW52ZXN0b3JzLXNsaWRlci1jb250YWluZXInKTtcbiAgICB2YXIgc2xpZGVXcmFwcGVycyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5pbnZlc3RvcnMtc2xpZGVyLWNvbnRhaW5lciAuaXRlbV9fY29udGVudCcpO1xuICAgIHZhciBzbGlkZXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuaXRlbS1jYXJkJyk7XG5cbiAgICBpZiAoc2NyZWVuV2lkdGggPCA3NjcgJiYgbXlTd2lwZXIgPT09IHVuZGVmaW5lZCkge1xuXG4gICAgICBpdGVtcy5mb3JFYWNoKGZ1bmN0aW9uIChlbGVtKSB7XG4gICAgICAgIGVsZW0uY2xhc3NMaXN0LmFkZCgnc3dpcGVyLWNvbnRhaW5lcicpO1xuICAgICAgfSk7XG5cbiAgICAgIHNsaWRlV3JhcHBlcnMuZm9yRWFjaChmdW5jdGlvbiAoZWxlbSkge1xuICAgICAgICBlbGVtLmNsYXNzTGlzdC5hZGQoJ3N3aXBlci13cmFwcGVyJyk7XG4gICAgICB9KTtcblxuICAgICAgc2xpZGVzLmZvckVhY2goZnVuY3Rpb24gKGVsZW0pIHtcbiAgICAgICAgZWxlbS5jbGFzc0xpc3QuYWRkKCdzd2lwZXItc2xpZGUnKTtcbiAgICAgIH0pO1xuXG4gICAgICBteVN3aXBlciA9IG5ldyBTd2lwZXIoJy5zd2lwZXItY29udGFpbmVyJywge1xuICAgICAgICBkaXJlY3Rpb246ICdob3Jpem9udGFsJyxcbiAgICAgICAgbG9vcDogZmFsc2UsXG4gICAgICAgIHNwYWNlQmV0d2VlbjogOCxcbiAgICAgICAgc2xpZGVzT2Zmc2V0QWZ0ZXI6IDMwLFxuICAgICAgICBzbGlkZXNQZXJWaWV3OiAnYXV0bycsXG4gICAgICB9KTtcblxuICAgIH0gZWxzZSBpZiAoc2NyZWVuV2lkdGggPiA3NjcgJiYgbXlTd2lwZXIgIT09IHVuZGVmaW5lZCkge1xuXG4gICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuc3dpcGVyLWNvbnRhaW5lcicpLmZvckVhY2goZnVuY3Rpb24gKGVsZW0pIHtcbiAgICAgICAgZWxlbS5zd2lwZXIuZGVzdHJveSgpO1xuICAgICAgfSk7XG5cbiAgICAgIG15U3dpcGVyID0gdW5kZWZpbmVkO1xuXG4gICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuc3dpcGVyLXdyYXBwZXInKS5mb3JFYWNoKGZ1bmN0aW9uIChlbGVtKSB7XG4gICAgICAgIGVsZW0ucmVtb3ZlQXR0cmlidXRlKCdzdHlsZScpO1xuICAgICAgfSk7XG4gICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuc3dpcGVyLXNsaWRlJykuZm9yRWFjaChmdW5jdGlvbiAoZWxlbSkge1xuICAgICAgICBlbGVtLnJlbW92ZUF0dHJpYnV0ZSgnc3R5bGUnKTtcbiAgICAgIH0pO1xuXG4gICAgICBpdGVtcy5mb3JFYWNoKGZ1bmN0aW9uIChlbGVtKSB7XG4gICAgICAgIGVsZW0uY2xhc3NMaXN0LnJlbW92ZSgnc3dpcGVyLWNvbnRhaW5lcicpO1xuICAgICAgfSk7XG5cbiAgICAgIHNsaWRlV3JhcHBlcnMuZm9yRWFjaChmdW5jdGlvbiAoZWxlbSkge1xuICAgICAgICBlbGVtLmNsYXNzTGlzdC5yZW1vdmUoJ3N3aXBlci13cmFwcGVyJyk7XG4gICAgICB9KTtcblxuICAgICAgc2xpZGVzLmZvckVhY2goZnVuY3Rpb24gKGVsZW0pIHtcbiAgICAgICAgZWxlbS5jbGFzc0xpc3QucmVtb3ZlKCdzd2lwZXItc2xpZGUnKTtcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxuXG4gIGluaXRTd2lwZXIoKTtcblxuICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigncmVzaXplJywgZnVuY3Rpb24gKCkge1xuICAgIGluaXRTd2lwZXIoKTtcbiAgfSk7XG59KSgpO1xuIiwiJ3VzZSBzdHJpY3QnO1xuXG4oZnVuY3Rpb24gKCkge1xuXG4gIHZhciBrZXlzID0ge1xuICAgIDM3OiAxLFxuICAgIDM4OiAxLFxuICAgIDM5OiAxLFxuICAgIDQwOiAxXG4gIH07XG5cbiAgZnVuY3Rpb24gcHJldmVudERlZmF1bHQoZSkge1xuICAgIGUgPSBlIHx8IHdpbmRvdy5ldmVudDtcbiAgICBpZiAoZS5wcmV2ZW50RGVmYXVsdCkge1xuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgZS5yZXR1cm5WYWx1ZSA9IGZhbHNlO1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIHByZXZlbnREZWZhdWx0Rm9yU2Nyb2xsS2V5cyhlKSB7XG4gICAgaWYgKGtleXNbZS5rZXlDb2RlXSkge1xuICAgICAgcHJldmVudERlZmF1bHQoZSk7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICB9XG5cbiAgd2luZG93LmRpc2FibGVTY3JvbGwgPSBmdW5jdGlvbiAoKSB7XG4gICAgLy8gaWYgKHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKSAvLyBvbGRlciBGRlxuICAgIC8vICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignRE9NTW91c2VTY3JvbGwnLCBwcmV2ZW50RGVmYXVsdCwgZmFsc2UpO1xuICAgIHdpbmRvdy5vbndoZWVsID0gcHJldmVudERlZmF1bHQ7IC8vIG1vZGVybiBzdGFuZGFyZFxuICAgIHdpbmRvdy5vbm1vdXNld2hlZWwgPSBkb2N1bWVudC5vbm1vdXNld2hlZWwgPSBwcmV2ZW50RGVmYXVsdDsgLy8gb2xkZXIgYnJvd3NlcnMsIElFXG4gICAgd2luZG93Lm9udG91Y2htb3ZlID0gcHJldmVudERlZmF1bHQ7IC8vIG1vYmlsZVxuICAgIGRvY3VtZW50Lm9ua2V5ZG93biA9IHByZXZlbnREZWZhdWx0Rm9yU2Nyb2xsS2V5cztcbiAgfVxuXG4gIHdpbmRvdy5lbmFibGVTY3JvbGwgPSBmdW5jdGlvbiAoKSB7XG4gICAgaWYgKHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKSB7XG4gICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcignRE9NTW91c2VTY3JvbGwnLCBwcmV2ZW50RGVmYXVsdCwgZmFsc2UpO1xuICAgICAgd2luZG93Lm9ubW91c2V3aGVlbCA9IGRvY3VtZW50Lm9ubW91c2V3aGVlbCA9IG51bGw7XG4gICAgICB3aW5kb3cub253aGVlbCA9IG51bGw7XG4gICAgICB3aW5kb3cub250b3VjaG1vdmUgPSBudWxsO1xuICAgICAgZG9jdW1lbnQub25rZXlkb3duID0gbnVsbDtcbiAgICB9XG4gIH1cblxuICB2YXIgc2NyZWVuV2lkdGggPSB3aW5kb3cuaW5uZXJXaWR0aCB8fCBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY2xpZW50V2lkdGggfHwgZG9jdW1lbnQuYm9keS5jbGllbnRXaWR0aDtcblxuICB2YXIgbWFpblBhZ2UgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuaW5kZXgnKTtcbiAgdmFyIHNsaWRlcnNXcmFwcGVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmRpcmVjdGlvbnMtb3V0ZXItd3JhcCcpO1xuICB2YXIgb3ZlcmxheUNvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5kaXJlY3Rpb25zLW92ZXJsYXktc2xpZGVyJyk7XG4gIHZhciBvdmVybGF5V3JhcHBlciA9IG92ZXJsYXlDb250YWluZXIucXVlcnlTZWxlY3RvcignLnN3aXBlci13cmFwcGVyJyk7XG4gIHZhciBvdmVybGF5U2xpZGVzID0gb3ZlcmxheUNvbnRhaW5lci5xdWVyeVNlbGVjdG9yQWxsKCcuc3dpcGVyLXNsaWRlJyk7XG4gIHZhciBzbGlkZXNOdW1iZXIgPSBvdmVybGF5U2xpZGVzLmxlbmd0aDtcbiAgdmFyIGluZGV4UmF0aW8gPSAxIC8gKHNsaWRlc051bWJlciAtIDEpO1xuICB2YXIgY29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmRpcmVjdGlvbnMnKTtcbiAgdmFyIHdyYXBwZXIgPSBjb250YWluZXIucXVlcnlTZWxlY3RvcignLnN3aXBlci13cmFwcGVyJyk7XG4gIHZhciBzbGlkZXMgPSBjb250YWluZXIucXVlcnlTZWxlY3RvckFsbCgnLmRpcmVjdGlvbnNfX2l0ZW0nKTtcbiAgdmFyIGJnQ29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmRpcmVjdGlvbnMtYmctZGVza3RvcCcpO1xuICB2YXIgYmdXcmFwcGVyID0gYmdDb250YWluZXIucXVlcnlTZWxlY3RvcignLnN3aXBlci13cmFwcGVyJyk7XG4gIHZhciBiZ1NsaWRlcyA9IGJnQ29udGFpbmVyLnF1ZXJ5U2VsZWN0b3JBbGwoJy5iZy1ibG9jaycpO1xuICB2YXIgY29udGVudENvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5kaXJlY3Rpb25zLWNvbnRlbnQtZGVza3RvcCcpO1xuICB2YXIgY29udGVudFdyYXBwZXIgPSBjb250ZW50Q29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJy5zd2lwZXItd3JhcHBlcicpO1xuICB2YXIgY29udGVudFNsaWRlcyA9IGNvbnRlbnRDb250YWluZXIucXVlcnlTZWxlY3RvckFsbCgnLmRpcmVjdGlvbnNfX2NvbnRlbnQnKTtcbiAgdmFyIGRlc2t0b3BQYXJ0bmVycyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5kaXJlY3Rpb25zLXBhcnRuZXJzLWRlc2t0b3AnKS5xdWVyeVNlbGVjdG9yQWxsKCcuZGlyZWN0aW9uc19fcGFydG5lcnMnKTtcbiAgdmFyIGRlc2t0b3BCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuZGlyZWN0aW9ucy1jb250ZW50LWJ1dHRvbicpO1xuICB2YXIgY29udGVudERldGFpbFBhZ2VzID0gW107XG4gIFtdLmZvckVhY2guY2FsbChjb250ZW50U2xpZGVzLCBmdW5jdGlvbiAoaXRlbSkge1xuICAgIGNvbnRlbnREZXRhaWxQYWdlcy5wdXNoKGl0ZW0uZ2V0QXR0cmlidXRlKCdkYXRhLWhyZWYnKSk7XG4gIH0pO1xuICB2YXIgaXNEZXNrdG9wU3dpcGVyO1xuICB2YXIgaXNTd2lwZXJBY3RpdmU7XG4gIHZhciBtb2JpbGVTd2lwZXI7XG4gIHZhciBvdmVybGF5U3dpcGVyO1xuICB2YXIgZGVza3RvcFN3aXBlcjtcbiAgdmFyIGJnU3dpcGVyO1xuICB2YXIgY29udGVudFN3aXBlcjtcbiAgdmFyIGN1cnJlbnRQYXJ0bmVycztcbiAgdmFyIHNsaWRlcnNXcmFwcGVyVG9wID0gc2xpZGVyc1dyYXBwZXIuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkudG9wICsgd2luZG93LnBhZ2VZT2Zmc2V0O1xuICB2YXIgc2xpZGVyc1dyYXBwZXJCb3R0b20gPSBzbGlkZXJzV3JhcHBlci5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS5ib3R0b20gKyB3aW5kb3cucGFnZVlPZmZzZXQ7XG4gIHZhciBzbGlkZXJzV3JhcHBlckhlaWdodCA9IHNsaWRlcnNXcmFwcGVyQm90dG9tIC0gc2xpZGVyc1dyYXBwZXJUb3A7XG4gIHZhciBpc0JlbG93U2xpZGVyID0gKHdpbmRvdy5wYWdlWU9mZnNldCA+IHNsaWRlcnNXcmFwcGVyQm90dG9tKTtcbiAgdmFyIGRlc2t0b3BJbml0aWFsU2xpZGUgPSAod2luZG93LnBhZ2VZT2Zmc2V0ID4gc2xpZGVyc1dyYXBwZXJCb3R0b20pID8gc2xpZGVzTnVtYmVyIDogMDtcbiAgdmFyIHVwcGVySW5kZXggPSAoZGVza3RvcEluaXRpYWxTbGlkZSA9PT0gc2xpZGVzTnVtYmVyKSA/IHNsaWRlc051bWJlciAtIDEgOiAwO1xuICB2YXIgbG93ZXJJbmRleCA9IHVwcGVySW5kZXggKyAxO1xuICB2YXIgc2Nyb2xsaW5nRm9yd2FyZCA9ICFkZXNrdG9wSW5pdGlhbFNsaWRlO1xuICB2YXIgaXNQYXJ0bmVyc0NoYW5nZWQ7XG4gIHZhciBwcmV2aW91c1Byb2dyZXNzO1xuICB2YXIgY3VycmVudFNsaWRlUHJvZ3Jlc3M7XG4gIHZhciB0b3VjaFN0YXJ0WSA9IDA7XG4gIHZhciB0b3VjaEVuZFkgPSAwO1xuXG4gIHZhciBpbml0TW9iaWxlU3dpcGVyID0gZnVuY3Rpb24oKSB7XG4gICAgaXNEZXNrdG9wU3dpcGVyID0gZmFsc2U7XG4gICAgbW9iaWxlU3dpcGVyID0gbmV3IFN3aXBlcihjb250YWluZXIsIHtcbiAgICAgIHBhZ2luYXRpb246IHtcbiAgICAgICAgZWw6ICcuc3dpcGVyLXBhZ2luYXRpb24tLW1vYmlsZScsXG4gICAgICAgIGNsaWNrYWJsZTogdHJ1ZVxuICAgICAgfVxuICAgIH0pO1xuICAgIG1vYmlsZVN3aXBlci5vbignc2xpZGVDaGFuZ2VUcmFuc2l0aW9uRW5kJywgZnVuY3Rpb24gKCkge1xuICAgICAgY3VycmVudFBhcnRuZXJzID0gdGhpcy5zbGlkZXNbdGhpcy5hY3RpdmVJbmRleF0ucXVlcnlTZWxlY3RvcignLmRpcmVjdGlvbnNfX3BhcnRuZXJzJyk7XG4gICAgICBpZiAoY3VycmVudFBhcnRuZXJzKSB7XG4gICAgICAgIGN1cnJlbnRQYXJ0bmVycy5jbGFzc0xpc3QuYWRkKCdwYXJ0bmVycy1tb3ZlJyk7XG4gICAgICB9XG4gICAgfSk7XG4gICAgbW9iaWxlU3dpcGVyLm9uKCdzbGlkZUNoYW5nZVRyYW5zaXRpb25TdGFydCcsIGZ1bmN0aW9uICgpIHtcbiAgICAgIGlmIChjdXJyZW50UGFydG5lcnMpIHtcbiAgICAgICAgY3VycmVudFBhcnRuZXJzLmNsYXNzTGlzdC5yZW1vdmUoJ3BhcnRuZXJzLW1vdmUnKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgICBpZiAod2luZG93LnBhZ2VZT2Zmc2V0ID09PSBzbGlkZXJzV3JhcHBlclRvcCkge1xuICAgICAgY3VycmVudFBhcnRuZXJzID0gbW9iaWxlU3dpcGVyLnNsaWRlc1swXS5xdWVyeVNlbGVjdG9yKCcuZGlyZWN0aW9uc19fcGFydG5lcnMnKTtcbiAgICAgIGlmIChjdXJyZW50UGFydG5lcnMpIHtcbiAgICAgICAgY3VycmVudFBhcnRuZXJzLmNsYXNzTGlzdC5hZGQoJ3BhcnRuZXJzLW1vdmUnKTtcbiAgICAgIH1cbiAgICB9XG4gIH07XG5cbiAgdmFyIGluaXREZXNrdG9wU3dpcGVyID0gZnVuY3Rpb24oKSB7XG4gICAgaXNEZXNrdG9wU3dpcGVyID0gdHJ1ZTtcbiAgICBvdmVybGF5U3dpcGVyID0gbmV3IFN3aXBlcihvdmVybGF5Q29udGFpbmVyLCB7XG4gICAgICBkaXJlY3Rpb246ICd2ZXJ0aWNhbCcsXG4gICAgICBsb29wOiBmYWxzZSxcbiAgICAgIGF1dG9wbGF5OiBmYWxzZSxcbiAgICAgIHNwYWNlQmV0d2VlbjogMCxcbiAgICAgIHNwZWVkOiA0MDAsXG4gICAgICBpbml0aWFsU2xpZGU6IGRlc2t0b3BJbml0aWFsU2xpZGUsXG4gICAgICBwYXNzaXZlTGlzdGVuZXJzOiBmYWxzZSxcbiAgICAgIHByZXZlbnRJbnRlcmFjdGlvbk9uVHJhbnNpdGlvbjogdHJ1ZSxcbiAgICAgIGZyZWVNb2RlOiB0cnVlLFxuICAgICAgZnJlZU1vZGVNb21lbnR1bTogZmFsc2UsXG4gICAgICB0b3VjaFJlbGVhc2VPbkVkZ2VzOiB0cnVlLFxuICAgICAgd2F0Y2hTbGlkZXNQcm9ncmVzczogdHJ1ZSxcbiAgICAgIG1vdXNld2hlZWw6IHtcbiAgICAgICAgcmVsZWFzZU9uRWRnZXM6IHRydWUsXG4gICAgICB9LFxuICAgICAgcGFnaW5hdGlvbjoge1xuICAgICAgICBlbDogJy5zd2lwZXItcGFnaW5hdGlvbi0tZGVza3RvcCcsXG4gICAgICB9LFxuICAgICAga2V5Ym9hcmQ6IHtcbiAgICAgICAgZW5hYmxlZDogdHJ1ZSxcbiAgICAgICAgb25seUluVmlld3BvcnQ6IGZhbHNlLFxuICAgICAgfVxuICAgIH0pO1xuICAgIGRlc2t0b3BTd2lwZXIgPSBuZXcgU3dpcGVyKGNvbnRhaW5lciwge1xuICAgICAgZGlyZWN0aW9uOiAndmVydGljYWwnLFxuICAgICAgbG9vcDogZmFsc2UsXG4gICAgICBhdXRvcGxheTogZmFsc2UsXG4gICAgICBzcGFjZUJldHdlZW46IDAsXG4gICAgICBpbml0aWFsU2xpZGU6IGRlc2t0b3BJbml0aWFsU2xpZGUsXG4gICAgICBwcmV2ZW50SW50ZXJhY3Rpb25PblRyYW5zaXRpb246IHRydWUsXG4gICAgICBlZmZlY3Q6ICdmYWRlJyxcbiAgICB9KTtcbiAgICBiZ1N3aXBlciA9IG5ldyBTd2lwZXIoYmdDb250YWluZXIsIHtcbiAgICAgIGRpcmVjdGlvbjogJ3ZlcnRpY2FsJyxcbiAgICAgIGxvb3A6IGZhbHNlLFxuICAgICAgYXV0b3BsYXk6IGZhbHNlLFxuICAgICAgc3BhY2VCZXR3ZWVuOiAwLFxuICAgICAgaW5pdGlhbFNsaWRlOiBkZXNrdG9wSW5pdGlhbFNsaWRlLFxuICAgICAgcHJldmVudEludGVyYWN0aW9uT25UcmFuc2l0aW9uOiB0cnVlLFxuICAgIH0pO1xuICAgIGNvbnRlbnRTd2lwZXIgPSBuZXcgU3dpcGVyKGNvbnRlbnRDb250YWluZXIsIHtcbiAgICAgIGRpcmVjdGlvbjogJ3ZlcnRpY2FsJyxcbiAgICAgIGxvb3A6IGZhbHNlLFxuICAgICAgYXV0b3BsYXk6IGZhbHNlLFxuICAgICAgc3BhY2VCZXR3ZWVuOjAsXG4gICAgICBpbml0aWFsU2xpZGU6IGRlc2t0b3BJbml0aWFsU2xpZGUsXG4gICAgICBwcmV2ZW50SW50ZXJhY3Rpb25PblRyYW5zaXRpb246IHRydWUsXG4gICAgICB3YXRjaFNsaWRlc1Byb2dyZXNzOiB0cnVlLFxuICAgIH0pO1xuICAgIG92ZXJsYXlTd2lwZXIuYWxsb3dTbGlkZVByZXYgPSBmYWxzZTtcbiAgICBvdmVybGF5U3dpcGVyLmFsbG93U2xpZGVOZXh0ID0gZmFsc2U7XG4gICAgb3ZlcmxheVN3aXBlci5tb3VzZXdoZWVsLmRpc2FibGUoKTtcbiAgICBvdmVybGF5U3dpcGVyLmNvbnRyb2xsZXIuY29udHJvbCA9IGRlc2t0b3BTd2lwZXI7XG4gICAgZGVza3RvcFN3aXBlci5jb250cm9sbGVyLmNvbnRyb2wgPSBiZ1N3aXBlcjtcbiAgICBiZ1N3aXBlci5jb250cm9sbGVyLmNvbnRyb2wgPSBjb250ZW50U3dpcGVyO1xuXG4gICAgb3ZlcmxheVN3aXBlci5vbignc2xpZGVDaGFuZ2UnLCBmdW5jdGlvbiAoKSB7XG4gICAgICBkZXNrdG9wQnV0dG9uLnNldEF0dHJpYnV0ZSgnaHJlZicsIGNvbnRlbnREZXRhaWxQYWdlc1t0aGlzLmFjdGl2ZUluZGV4XSk7XG4gICAgfSk7XG5cbiAgICBvdmVybGF5U3dpcGVyLm9uKCdzbGlkZUNoYW5nZVRyYW5zaXRpb25TdGFydCcsIGZ1bmN0aW9uICgpIHtcbiAgICAgIGlmICghaXNQYXJ0bmVyc0NoYW5nZWQpIHtcbiAgICAgICAgY3VycmVudFBhcnRuZXJzLmNsYXNzTGlzdC5yZW1vdmUoJ3BhcnRuZXJzLW1vdmUnKTtcbiAgICAgICAgY3VycmVudFBhcnRuZXJzLmNsYXNzTGlzdC5hZGQoJ3BhcnRuZXJzLWhpZGUnKTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIG92ZXJsYXlTd2lwZXIub24oJ3NsaWRlQ2hhbmdlVHJhbnNpdGlvbkVuZCcsIGZ1bmN0aW9uICgpIHtcbiAgICAgIGlmICghaXNQYXJ0bmVyc0NoYW5nZWQpIHtcbiAgICAgICAgY3VycmVudFBhcnRuZXJzLmNsYXNzTGlzdC5yZW1vdmUoJ3BhcnRuZXJzLWhpZGUnKTtcbiAgICAgICAgY3VycmVudFBhcnRuZXJzID0gZGVza3RvcFBhcnRuZXJzW3RoaXMuYWN0aXZlSW5kZXhdO1xuICAgICAgICBjdXJyZW50UGFydG5lcnMuY2xhc3NMaXN0LmFkZCgncGFydG5lcnMtbW92ZScpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaXNQYXJ0bmVyc0NoYW5nZWQgPSBmYWxzZTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIG92ZXJsYXlTd2lwZXIub24oJ3Byb2dyZXNzJywgZnVuY3Rpb24gKCkge1xuICAgICAgdXBwZXJJbmRleCA9IE1hdGguZmxvb3IodGhpcy5wcm9ncmVzcyAvIGluZGV4UmF0aW8pO1xuICAgICAgbG93ZXJJbmRleCA9IHVwcGVySW5kZXggKyAxO1xuICAgICAgY3VycmVudFNsaWRlUHJvZ3Jlc3MgPSB0aGlzLnByb2dyZXNzIC8gaW5kZXhSYXRpbyAtIHVwcGVySW5kZXg7XG4gICAgICBpZiAocHJldmlvdXNQcm9ncmVzcyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHNjcm9sbGluZ0ZvcndhcmQgPSAodGhpcy5wcm9ncmVzcyA+PSBwcmV2aW91c1Byb2dyZXNzKTtcbiAgICAgIH1cbiAgICAgIGlmIChzY3JvbGxpbmdGb3J3YXJkKSB7XG4gICAgICAgIGlmIChjdXJyZW50U2xpZGVQcm9ncmVzcyA+IDAuNiAmJiBjdXJyZW50U2xpZGVQcm9ncmVzcyA8IDAuOCkge1xuICAgICAgICAgIGN1cnJlbnRQYXJ0bmVycy5jbGFzc0xpc3QucmVtb3ZlKCdwYXJ0bmVycy1tb3ZlJyk7XG4gICAgICAgICAgY3VycmVudFBhcnRuZXJzLmNsYXNzTGlzdC5hZGQoJ3BhcnRuZXJzLWhpZGUnKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoY3VycmVudFNsaWRlUHJvZ3Jlc3MgPiAwLjgpIHtcbiAgICAgICAgICBpZiAoY3VycmVudFBhcnRuZXJzLmNsYXNzTGlzdC5jb250YWlucygncGFydG5lcnMtbW92ZScpKSB7XG4gICAgICAgICAgICBjdXJyZW50UGFydG5lcnMuY2xhc3NMaXN0LnJlbW92ZSgncGFydG5lcnMtbW92ZScpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBjdXJyZW50UGFydG5lcnMuY2xhc3NMaXN0LnJlbW92ZSgncGFydG5lcnMtaGlkZScpO1xuICAgICAgICAgIGN1cnJlbnRQYXJ0bmVycyA9IChsb3dlckluZGV4IDwgc2xpZGVzTnVtYmVyKSA/ICBkZXNrdG9wUGFydG5lcnNbbG93ZXJJbmRleF0gOiBkZXNrdG9wUGFydG5lcnNbc2xpZGVzTnVtYmVyIC0gMV07XG4gICAgICAgICAgaXNQYXJ0bmVyc0NoYW5nZWQgPSB0cnVlO1xuICAgICAgICAgIGN1cnJlbnRQYXJ0bmVycy5jbGFzc0xpc3QuYWRkKCdwYXJ0bmVycy1tb3ZlJyk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGlmIChjdXJyZW50U2xpZGVQcm9ncmVzcyA+IDAuNCAmJiBjdXJyZW50U2xpZGVQcm9ncmVzcyA8IDAuNikge1xuICAgICAgICAgIGN1cnJlbnRQYXJ0bmVycy5jbGFzc0xpc3QucmVtb3ZlKCdwYXJ0bmVycy1tb3ZlJyk7XG4gICAgICAgICAgY3VycmVudFBhcnRuZXJzLmNsYXNzTGlzdC5hZGQoJ3BhcnRuZXJzLWhpZGUnKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoY3VycmVudFNsaWRlUHJvZ3Jlc3MgPCAwLjQpIHtcbiAgICAgICAgICBpZiAoY3VycmVudFBhcnRuZXJzLmNsYXNzTGlzdC5jb250YWlucygncGFydG5lcnMtbW92ZScpKSB7XG4gICAgICAgICAgICBjdXJyZW50UGFydG5lcnMuY2xhc3NMaXN0LnJlbW92ZSgncGFydG5lcnMtbW92ZScpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBjdXJyZW50UGFydG5lcnMuY2xhc3NMaXN0LnJlbW92ZSgncGFydG5lcnMtaGlkZScpO1xuICAgICAgICAgIGN1cnJlbnRQYXJ0bmVycyA9IGRlc2t0b3BQYXJ0bmVyc1t1cHBlckluZGV4XTtcbiAgICAgICAgICBpc1BhcnRuZXJzQ2hhbmdlZCA9IHRydWU7XG4gICAgICAgICAgY3VycmVudFBhcnRuZXJzLmNsYXNzTGlzdC5hZGQoJ3BhcnRuZXJzLW1vdmUnKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcHJldmlvdXNQcm9ncmVzcyA9IHRoaXMucHJvZ3Jlc3M7XG4gICAgfSk7XG5cbiAgICBjb250ZW50U3dpcGVyLm9uKCdwcm9ncmVzcycsIGZ1bmN0aW9uICgpIHtcbiAgICAgIGlmICgodXBwZXJJbmRleCAhPT0gdW5kZWZpbmVkKSAmJiAobG93ZXJJbmRleCAhPT0gdW5kZWZpbmVkKSAmJiAoY3VycmVudFNsaWRlUHJvZ3Jlc3MgIT09dW5kZWZpbmVkKSkge1xuICAgICAgICB2YXIgZGVza3RvcEJ1dHRvbk9wYWNpdHkgPSAoY3VycmVudFNsaWRlUHJvZ3Jlc3MgPCAwLjg1KSAmJiAoY3VycmVudFNsaWRlUHJvZ3Jlc3MgPiAwLjM1KSA/IDAuNCA6IDE7XG4gICAgICAgIHZhciBkZXNrdG9wQnV0dG9uWkluZGV4ID0gKGN1cnJlbnRTbGlkZVByb2dyZXNzIDwgMC44NSkgJiYgKGN1cnJlbnRTbGlkZVByb2dyZXNzID4gMC4zNSkgPyAtMSA6IDIwMDtcbiAgICAgICAgZGVza3RvcEJ1dHRvbi5zdHlsZS5vcGFjaXR5ID0gZGVza3RvcEJ1dHRvbk9wYWNpdHk7XG4gICAgICAgIGRlc2t0b3BCdXR0b24uc3R5bGUuekluZGV4ID0gZGVza3RvcEJ1dHRvblpJbmRleDtcblxuICAgICAgICB2YXIgaW5uZXJVcHBlclRyYW5zbGF0ZSA9IChjdXJyZW50U2xpZGVQcm9ncmVzcyA8IDAuOCkgPyAoY3VycmVudFNsaWRlUHJvZ3Jlc3MgLyAxLjE0ICogMzc1KSA6IDA7XG4gICAgICAgIHZhciBpbm5lclVwcGVyT3BhY2l0eSA9IChjdXJyZW50U2xpZGVQcm9ncmVzcyA8IDAuOCkgPyAoKDEgLSBjdXJyZW50U2xpZGVQcm9ncmVzcykgKiAxLjI1KSAtIDAuMiA6IDA7XG4gICAgICAgIHRoaXMuc2xpZGVzW3VwcGVySW5kZXhdLnF1ZXJ5U2VsZWN0b3IoJy5jb250ZW50X193cmFwcGVyJykuc3R5bGUudHJhbnNmb3JtID0gJ3RyYW5zbGF0ZTNkKCAwLCAnICsgaW5uZXJVcHBlclRyYW5zbGF0ZSArICdweCwgMCknO1xuICAgICAgICB0aGlzLnNsaWRlc1t1cHBlckluZGV4XS5xdWVyeVNlbGVjdG9yKCcuY29udGVudF9fd3JhcHBlcicpLnN0eWxlLm9wYWNpdHkgPSBpbm5lclVwcGVyT3BhY2l0eTtcblxuICAgICAgICBpZiAobG93ZXJJbmRleCA8IHNsaWRlc051bWJlcikge1xuICAgICAgICAgIHZhciBpbm5lckxvd2VyVHJhbnNsYXRlID0gKGN1cnJlbnRTbGlkZVByb2dyZXNzIDwgMC43KSA/IDAgOiAoY3VycmVudFNsaWRlUHJvZ3Jlc3MgLSAxKSAqIDEyNztcbiAgICAgICAgICB2YXIgaW5uZXJMb3dlck9wYWNpdHkgPSAoY3VycmVudFNsaWRlUHJvZ3Jlc3MgPCAwLjcpID8gMCA6IChjdXJyZW50U2xpZGVQcm9ncmVzcyAtIDAuNykgKiAzLjM0O1xuICAgICAgICAgIHRoaXMuc2xpZGVzW2xvd2VySW5kZXhdLnF1ZXJ5U2VsZWN0b3IoJy5jb250ZW50X193cmFwcGVyJykuc3R5bGUudHJhbnNmb3JtID0gJ3RyYW5zbGF0ZTNkKCAwLCAnICsgaW5uZXJMb3dlclRyYW5zbGF0ZSArICdweCwgMCknO1xuICAgICAgICAgIHRoaXMuc2xpZGVzW2xvd2VySW5kZXhdLnF1ZXJ5U2VsZWN0b3IoJy5jb250ZW50X193cmFwcGVyJykuc3R5bGUub3BhY2l0eSA9IGlubmVyTG93ZXJPcGFjaXR5O1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICBpc1N3aXBlckFjdGl2ZSA9IGZhbHNlO1xuICAgIGRlc2t0b3BCdXR0b24uc2V0QXR0cmlidXRlKCdocmVmJywgY29udGVudERldGFpbFBhZ2VzW2Rlc2t0b3BJbml0aWFsU2xpZGVdKTtcbiAgICB1cHBlckluZGV4ID0gKGRlc2t0b3BJbml0aWFsU2xpZGUgPT09IHNsaWRlc051bWJlcikgPyBzbGlkZXNOdW1iZXIgLSAxIDogMDtcbiAgICBsb3dlckluZGV4ID0gdXBwZXJJbmRleCArIDE7XG4gICAgc2Nyb2xsaW5nRm9yd2FyZCA9ICFkZXNrdG9wSW5pdGlhbFNsaWRlO1xuICAgIGlmICh3aW5kb3cucGFnZVlPZmZzZXQgPT09IHNsaWRlcnNXcmFwcGVyVG9wKSB7XG4gICAgICBjdXJyZW50UGFydG5lcnMgPSBkZXNrdG9wUGFydG5lcnNbZGVza3RvcEluaXRpYWxTbGlkZV07XG4gICAgICBjdXJyZW50UGFydG5lcnMuY2xhc3NMaXN0LmFkZCgncGFydG5lcnMtbW92ZScpO1xuICAgIH1cbiAgfTtcblxuICB2YXIgZGVzdHJveVN3aXBlciA9IGZ1bmN0aW9uKGlzRGVza3RvcCkge1xuICAgIGNvbnRhaW5lci5zd2lwZXIuZGVzdHJveSgpO1xuICAgIHdyYXBwZXIucmVtb3ZlQXR0cmlidXRlKCdzdHlsZScpO1xuICAgIHNsaWRlcy5mb3JFYWNoKGZ1bmN0aW9uIChlbGVtKSB7XG4gICAgICBlbGVtLnJlbW92ZUF0dHJpYnV0ZSgnc3R5bGUnKTtcbiAgICB9KTtcblxuICAgIGlmIChpc0Rlc2t0b3ApIHtcbiAgICAgIG92ZXJsYXlDb250YWluZXIuc3dpcGVyLmRlc3Ryb3koKTtcbiAgICAgIG92ZXJsYXlXcmFwcGVyLnJlbW92ZUF0dHJpYnV0ZSgnc3R5bGUnKTtcbiAgICAgIG92ZXJsYXlTbGlkZXMuZm9yRWFjaChmdW5jdGlvbiAoZWxlbSkge1xuICAgICAgICBlbGVtLnJlbW92ZUF0dHJpYnV0ZSgnc3R5bGUnKTtcbiAgICAgIH0pO1xuXG4gICAgICBiZ0NvbnRhaW5lci5zd2lwZXIuZGVzdHJveSgpO1xuICAgICAgYmdXcmFwcGVyLnJlbW92ZUF0dHJpYnV0ZSgnc3R5bGUnKTtcbiAgICAgIGJnU2xpZGVzLmZvckVhY2goZnVuY3Rpb24gKGVsZW0pIHtcbiAgICAgICAgZWxlbS5yZW1vdmVBdHRyaWJ1dGUoJ3N0eWxlJyk7XG4gICAgICB9KTtcblxuICAgICAgY29udGVudENvbnRhaW5lci5zd2lwZXIuZGVzdHJveSgpO1xuICAgICAgY29udGVudFdyYXBwZXIucmVtb3ZlQXR0cmlidXRlKCdzdHlsZScpO1xuICAgICAgY29udGVudFNsaWRlcy5mb3JFYWNoKGZ1bmN0aW9uIChlbGVtKSB7XG4gICAgICAgIGVsZW0ucmVtb3ZlQXR0cmlidXRlKCdzdHlsZScpO1xuICAgICAgfSk7XG5cbiAgICAgIG92ZXJsYXlTd2lwZXIgPSB1bmRlZmluZWQ7XG4gICAgICBkZXNrdG9wU3dpcGVyID0gdW5kZWZpbmVkO1xuICAgICAgYmdTd2lwZXIgPSB1bmRlZmluZWQ7XG4gICAgICBjb250ZW50U3dpcGVyID0gdW5kZWZpbmVkO1xuICAgICAgY3VycmVudFBhcnRuZXJzID0gdW5kZWZpbmVkO1xuICAgICAgdXBwZXJJbmRleCA9IHVuZGVmaW5lZDtcbiAgICAgIGxvd2VySW5kZXggPSB1bmRlZmluZWQ7XG4gICAgICBzY3JvbGxpbmdGb3J3YXJkID0gdW5kZWZpbmVkO1xuICAgICAgcHJldmlvdXNQcm9ncmVzcyA9IHVuZGVmaW5lZDtcbiAgICAgIGN1cnJlbnRTbGlkZVByb2dyZXNzID0gdW5kZWZpbmVkO1xuICAgICAgW10uZm9yRWFjaC5jYWxsKGRlc2t0b3BQYXJ0bmVycywgZnVuY3Rpb24gKGl0ZW0pIHtcbiAgICAgICAgaXRlbS5jbGFzc0xpc3QucmVtb3ZlKCdwYXJ0bmVycy1tb3ZlJyk7XG4gICAgICAgIGl0ZW0uY2xhc3NMaXN0LnJlbW92ZSgncGFydG5lcnMtaGlkZScpO1xuICAgICAgfSk7XG4gICAgICBbXS5mb3JFYWNoLmNhbGwoY29udGVudFNsaWRlcywgZnVuY3Rpb24gKGl0ZW0pIHtcbiAgICAgICAgaXRlbS5xdWVyeVNlbGVjdG9yKCcuY29udGVudF9fd3JhcHBlcicpLnJlbW92ZUF0dHJpYnV0ZSgnc3R5bGUnKTtcbiAgICAgIH0pO1xuICAgICAgZGVza3RvcEJ1dHRvbi5yZW1vdmVBdHRyaWJ1dGUoJ3N0eWxlJyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIG1vYmlsZVN3aXBlciA9IHVuZGVmaW5lZDtcbiAgICAgIFtdLmZvckVhY2guY2FsbChzbGlkZXMsIGZ1bmN0aW9uIChpdGVtKSB7XG4gICAgICAgIGl0ZW0ucXVlcnlTZWxlY3RvcignLmRpcmVjdGlvbnNfX3BhcnRuZXJzJykuY2xhc3NMaXN0LnJlbW92ZSgncGFydG5lcnMtbW92ZScpO1xuICAgICAgfSk7XG4gICAgfVxuICB9O1xuXG4gIHZhciBwcm9jZXNzUmVzaXplID0gZnVuY3Rpb24oKSB7XG4gICAgaWYgKHdpbmRvdy5tYXRjaE1lZGlhKCcobWF4LXdpZHRoOiAxMjc5cHgpJykubWF0Y2hlcykge1xuICAgICAgaWYgKGlzRGVza3RvcFN3aXBlcikge1xuICAgICAgICBkZXN0cm95U3dpcGVyKHRydWUpO1xuICAgICAgICBpbml0TW9iaWxlU3dpcGVyKCk7XG4gICAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCdzY3JvbGwnLCBkZXNrdG9wU2Nyb2xsSGFuZGxlcik7XG4gICAgICAgIHNsaWRlcnNXcmFwcGVyLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3doZWVsJywgZGVza3RvcFN3aXBlcldoZWVsSGFuZGxlcik7XG4gICAgICAgIHNsaWRlcnNXcmFwcGVyLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3RvdWNoc3RhcnQnLCBkZXNrdG9wU3dpcGVyVG91Y2hTdGFydCk7XG4gICAgICAgIHNsaWRlcnNXcmFwcGVyLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3RvdWNoZW5kJywgZGVza3RvcFN3aXBlclRvdWNoRW5kKTtcbiAgICAgICAgaWYgKHNsaWRlcnNXcmFwcGVyLmNsYXNzTGlzdC5jb250YWlucygnZGlyZWN0aW9ucy1vdXRlci13cmFwLS1maXhlZCcpKSB7XG4gICAgICAgICAgd2luZG93LnNjcm9sbFRvKDAsIHNsaWRlcnNXcmFwcGVyVG9wKTtcbiAgICAgICAgICBzbGlkZXJzV3JhcHBlci5jbGFzc0xpc3QucmVtb3ZlKCdkaXJlY3Rpb25zLW91dGVyLXdyYXAtLWZpeGVkJyk7XG4gICAgICAgIH1cbiAgICAgICAgd2luZG93LmVuYWJsZVNjcm9sbCgpO1xuICAgICAgICBpZiAod2luZG93Lm1hdGNoTWVkaWEoJyhtaW4td2lkdGg6IDc2OHB4KSBhbmQgKG1heC13aWR0aDogMTI3OXB4KScpLm1hdGNoZXMpIHtcbiAgICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignc2Nyb2xsJywgdGFibGV0U2Nyb2xsSGFuZGxlcik7XG4gICAgICAgIH1cbiAgICAgICAgbWFpblBhZ2Uuc3R5bGUub3ZlcmZsb3dZID0gJ2F1dG8nO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBpZiAoIWlzRGVza3RvcFN3aXBlcikge1xuICAgICAgICBkZXN0cm95U3dpcGVyKGZhbHNlKTtcbiAgICAgICAgaXNCZWxvd1NsaWRlciA9ICh3aW5kb3cucGFnZVlPZmZzZXQgPiBzbGlkZXJzV3JhcHBlckJvdHRvbSk7XG4gICAgICAgIGRlc2t0b3BJbml0aWFsU2xpZGUgPSBpc0JlbG93U2xpZGVyID8gc2xpZGVzTnVtYmVyIDogMDtcbiAgICAgICAgaW5pdERlc2t0b3BTd2lwZXIoKTtcbiAgICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3Njcm9sbCcsIHRhYmxldFNjcm9sbEhhbmRsZXIpO1xuICAgICAgICBpZiAoKHdpbmRvdy5wYWdlWU9mZnNldCA+IHNsaWRlcnNXcmFwcGVyVG9wKSAmJlxuICAgICAgICAoIWlzQmVsb3dTbGlkZXIpIHx8XG4gICAgICAgICgod2luZG93LnBhZ2VZT2Zmc2V0ICsgc2xpZGVyc1dyYXBwZXJIZWlnaHQpIDwgc2xpZGVyc1dyYXBwZXJCb3R0b20pICYmXG4gICAgICAgIGlzQmVsb3dTbGlkZXIpIHtcbiAgICAgICAgICBzbGlkZXJzV3JhcHBlci5jbGFzc0xpc3QuYWRkKCdkaXJlY3Rpb25zLW91dGVyLXdyYXAtLWZpeGVkJyk7XG4gICAgICAgICAgY3VycmVudFBhcnRuZXJzID0gZGVza3RvcFBhcnRuZXJzW292ZXJsYXlTd2lwZXIuYWN0aXZlSW5kZXhdO1xuICAgICAgICAgIGN1cnJlbnRQYXJ0bmVycy5jbGFzc0xpc3QuYWRkKCdwYXJ0bmVycy1tb3ZlJyk7XG4gICAgICAgICAgZGVza3RvcEJ1dHRvbi5zZXRBdHRyaWJ1dGUoJ2hyZWYnLCBjb250ZW50RGV0YWlsUGFnZXNbb3ZlcmxheVN3aXBlci5hY3RpdmVJbmRleF0pO1xuICAgICAgICAgIHdpbmRvdy5kaXNhYmxlU2Nyb2xsKCk7XG4gICAgICAgICAgb3ZlcmxheVN3aXBlci5hbGxvd1NsaWRlUHJldiA9IHRydWU7XG4gICAgICAgICAgb3ZlcmxheVN3aXBlci5hbGxvd1NsaWRlTmV4dCA9IHRydWU7XG4gICAgICAgICAgb3ZlcmxheVN3aXBlci5tb3VzZXdoZWVsLmVuYWJsZSgpO1xuICAgICAgICAgIGlzU3dpcGVyQWN0aXZlID0gdHJ1ZTtcbiAgICAgICAgICBzbGlkZXJzV3JhcHBlci5hZGRFdmVudExpc3RlbmVyKCd3aGVlbCcsIGRlc2t0b3BTd2lwZXJXaGVlbEhhbmRsZXIpO1xuICAgICAgICAgIHNsaWRlcnNXcmFwcGVyLmFkZEV2ZW50TGlzdGVuZXIoJ3RvdWNoc3RhcnQnLCBkZXNrdG9wU3dpcGVyVG91Y2hTdGFydCk7XG4gICAgICAgICAgc2xpZGVyc1dyYXBwZXIuYWRkRXZlbnRMaXN0ZW5lcigndG91Y2hlbmQnLCBkZXNrdG9wU3dpcGVyVG91Y2hFbmQpO1xuICAgICAgICAgIG1haW5QYWdlLnN0eWxlLm92ZXJmbG93WSA9ICdoaWRkZW4nO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdzY3JvbGwnLCBkZXNrdG9wU2Nyb2xsSGFuZGxlcik7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH07XG5cbiAgaWYgKHdpbmRvdy5tYXRjaE1lZGlhKFwiKG1heC13aWR0aDogMTI3OXB4KVwiKS5tYXRjaGVzKSB7XG4gICAgaW5pdE1vYmlsZVN3aXBlcigpO1xuICB9IGVsc2Uge1xuICAgIGluaXREZXNrdG9wU3dpcGVyKCk7XG4gIH1cblxuICB2YXIgcmVzaXplVGltZXI7XG4gIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdyZXNpemUnLCBmdW5jdGlvbiAoKSB7XG4gICAgY2xlYXJUaW1lb3V0KHJlc2l6ZVRpbWVyKTtcbiAgICByZXNpemVUaW1lciA9IHNldFRpbWVvdXQocHJvY2Vzc1Jlc2l6ZSwgMTApO1xuICB9KTtcblxuICB2YXIgbW91c2VUaW1lb3V0O1xuICB2YXIgZGVza3RvcFN3aXBlcldoZWVsSGFuZGxlciA9IGZ1bmN0aW9uIChldnQpIHtcbiAgICBpZiAoaXNTd2lwZXJBY3RpdmUpIHtcbiAgICAgIGV2dC5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgIGlmICgoZXZ0LmRlbHRhWSA+IDAgJiYgb3ZlcmxheVN3aXBlci5pc0VuZCAmJiAhb3ZlcmxheVN3aXBlci5hbmltYXRpbmcpIHx8IChldnQuZGVsdGFZIDwgMCAmJiBvdmVybGF5U3dpcGVyLmlzQmVnaW5uaW5nICYmICFvdmVybGF5U3dpcGVyLmFuaW1hdGluZykpIHtcbiAgICAgICAgY2xlYXJUaW1lb3V0KG1vdXNlVGltZW91dCk7XG4gICAgICAgIG1vdXNlVGltZW91dCA9IHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgIHNsaWRlcnNXcmFwcGVyLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3doZWVsJywgZGVza3RvcFN3aXBlcldoZWVsSGFuZGxlcik7XG4gICAgICAgICAgc2xpZGVyc1dyYXBwZXIucmVtb3ZlRXZlbnRMaXN0ZW5lcigndG91Y2hzdGFydCcsIGRlc2t0b3BTd2lwZXJUb3VjaFN0YXJ0KTtcbiAgICAgICAgICBzbGlkZXJzV3JhcHBlci5yZW1vdmVFdmVudExpc3RlbmVyKCd0b3VjaGVuZCcsIGRlc2t0b3BTd2lwZXJUb3VjaEVuZCk7XG4gICAgICAgICAgd2luZG93LnNjcm9sbFRvKDAsIHNsaWRlcnNXcmFwcGVyVG9wKTtcbiAgICAgICAgICBzbGlkZXJzV3JhcHBlci5jbGFzc0xpc3QucmVtb3ZlKCdkaXJlY3Rpb25zLW91dGVyLXdyYXAtLWZpeGVkJyk7XG4gICAgICAgICAgY3VycmVudFBhcnRuZXJzLmNsYXNzTGlzdC5yZW1vdmUoJ3BhcnRuZXJzLW1vdmUnKTtcbiAgICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignc2Nyb2xsJywgZGVza3RvcFNjcm9sbEhhbmRsZXIpO1xuICAgICAgICAgIG92ZXJsYXlTd2lwZXIuYWxsb3dTbGlkZVByZXYgPSBmYWxzZTtcbiAgICAgICAgICBvdmVybGF5U3dpcGVyLmFsbG93U2xpZGVOZXh0ID0gZmFsc2U7XG4gICAgICAgICAgb3ZlcmxheVN3aXBlci5tb3VzZXdoZWVsLmRpc2FibGUoKTtcbiAgICAgICAgICBpc0JlbG93U2xpZGVyID0gb3ZlcmxheVN3aXBlci5pc0VuZDtcbiAgICAgICAgICB3aW5kb3cuZW5hYmxlU2Nyb2xsKCk7XG4gICAgICAgICAgaXNTd2lwZXJBY3RpdmUgPSBmYWxzZTtcbiAgICAgICAgICBtYWluUGFnZS5zdHlsZS5vdmVyZmxvd1kgPSAnYXV0byc7XG4gICAgICAgIH0sIDEwMCk7XG4gICAgICB9XG4gICAgfVxuICB9O1xuXG4gIHZhciBkZXNrdG9wU3dpcGVyVG91Y2hTdGFydCA9IGZ1bmN0aW9uIChldnQpIHtcbiAgICB0b3VjaFN0YXJ0WSA9IGV2dC5jaGFuZ2VkVG91Y2hlc1swXS5zY3JlZW5ZO1xuICB9O1xuXG4gIHZhciBkZXNrdG9wU3dpcGVyVG91Y2hFbmQgPSBmdW5jdGlvbiAoZXZ0KSB7XG4gICAgaWYgKGlzU3dpcGVyQWN0aXZlKSB7XG4gICAgICBldnQuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICB0b3VjaEVuZFkgPSBldnQuY2hhbmdlZFRvdWNoZXNbMF0uc2NyZWVuWTtcbiAgICAgIGlmICgodG91Y2hFbmRZIDwgdG91Y2hTdGFydFkgJiYgb3ZlcmxheVN3aXBlci5pc0VuZCAmJiAhb3ZlcmxheVN3aXBlci5hbmltYXRpbmcpIHx8ICh0b3VjaEVuZFkgPiB0b3VjaFN0YXJ0WSAmJiBvdmVybGF5U3dpcGVyLmlzQmVnaW5uaW5nICYmICFvdmVybGF5U3dpcGVyLmFuaW1hdGluZykpIHtcbiAgICAgICAgc2xpZGVyc1dyYXBwZXIucmVtb3ZlRXZlbnRMaXN0ZW5lcignd2hlZWwnLCBkZXNrdG9wU3dpcGVyV2hlZWxIYW5kbGVyKTtcbiAgICAgICAgc2xpZGVyc1dyYXBwZXIucmVtb3ZlRXZlbnRMaXN0ZW5lcigndG91Y2hzdGFydCcsIGRlc2t0b3BTd2lwZXJUb3VjaFN0YXJ0KTtcbiAgICAgICAgc2xpZGVyc1dyYXBwZXIucmVtb3ZlRXZlbnRMaXN0ZW5lcigndG91Y2hlbmQnLCBkZXNrdG9wU3dpcGVyVG91Y2hFbmQpO1xuICAgICAgICB3aW5kb3cuc2Nyb2xsVG8oMCwgc2xpZGVyc1dyYXBwZXJUb3ApO1xuICAgICAgICBzbGlkZXJzV3JhcHBlci5jbGFzc0xpc3QucmVtb3ZlKCdkaXJlY3Rpb25zLW91dGVyLXdyYXAtLWZpeGVkJyk7XG4gICAgICAgIGN1cnJlbnRQYXJ0bmVycy5jbGFzc0xpc3QucmVtb3ZlKCdwYXJ0bmVycy1tb3ZlJyk7XG4gICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdzY3JvbGwnLCBkZXNrdG9wU2Nyb2xsSGFuZGxlcik7XG4gICAgICAgIG92ZXJsYXlTd2lwZXIuYWxsb3dTbGlkZVByZXYgPSBmYWxzZTtcbiAgICAgICAgb3ZlcmxheVN3aXBlci5hbGxvd1NsaWRlTmV4dCA9IGZhbHNlO1xuICAgICAgICBvdmVybGF5U3dpcGVyLm1vdXNld2hlZWwuZGlzYWJsZSgpO1xuICAgICAgICBpc0JlbG93U2xpZGVyID0gb3ZlcmxheVN3aXBlci5pc0VuZDtcbiAgICAgICAgd2luZG93LmVuYWJsZVNjcm9sbCgpO1xuICAgICAgICBpc1N3aXBlckFjdGl2ZSA9IGZhbHNlO1xuICAgICAgICBtYWluUGFnZS5zdHlsZS5vdmVyZmxvd1kgPSAnYXV0byc7XG4gICAgICB9XG4gICAgfVxuICB9O1xuXG4gIHZhciBkZXNrdG9wU2Nyb2xsSGFuZGxlciA9IGZ1bmN0aW9uICgpIHtcbiAgICBpZiAod2luZG93Lm1hdGNoTWVkaWEoJyhtaW4td2lkdGg6IDEyODBweCknKS5tYXRjaGVzKSB7XG4gICAgICBpZiAoKHdpbmRvdy5wYWdlWU9mZnNldCA+IHNsaWRlcnNXcmFwcGVyVG9wKSAmJlxuICAgICAgICAoIWlzQmVsb3dTbGlkZXIpIHx8XG4gICAgICAgICgod2luZG93LnBhZ2VZT2Zmc2V0ICsgc2xpZGVyc1dyYXBwZXJIZWlnaHQpIDwgc2xpZGVyc1dyYXBwZXJCb3R0b20pICYmXG4gICAgICAgIGlzQmVsb3dTbGlkZXIpIHtcbiAgICAgICAgaWYgKCFpc1N3aXBlckFjdGl2ZSkge1xuICAgICAgICAgIHNsaWRlcnNXcmFwcGVyLmNsYXNzTGlzdC5hZGQoJ2RpcmVjdGlvbnMtb3V0ZXItd3JhcC0tZml4ZWQnKTtcbiAgICAgICAgICBjdXJyZW50UGFydG5lcnMgPSBkZXNrdG9wUGFydG5lcnNbb3ZlcmxheVN3aXBlci5hY3RpdmVJbmRleF07XG4gICAgICAgICAgY3VycmVudFBhcnRuZXJzLmNsYXNzTGlzdC5hZGQoJ3BhcnRuZXJzLW1vdmUnKTtcbiAgICAgICAgICBkZXNrdG9wQnV0dG9uLnNldEF0dHJpYnV0ZSgnaHJlZicsIGNvbnRlbnREZXRhaWxQYWdlc1tvdmVybGF5U3dpcGVyLmFjdGl2ZUluZGV4XSk7XG4gICAgICAgICAgd2luZG93LmRpc2FibGVTY3JvbGwoKTtcbiAgICAgICAgICBvdmVybGF5U3dpcGVyLmFsbG93U2xpZGVQcmV2ID0gdHJ1ZTtcbiAgICAgICAgICBvdmVybGF5U3dpcGVyLmFsbG93U2xpZGVOZXh0ID0gdHJ1ZTtcbiAgICAgICAgICBvdmVybGF5U3dpcGVyLm1vdXNld2hlZWwuZW5hYmxlKCk7XG4gICAgICAgICAgaXNTd2lwZXJBY3RpdmUgPSB0cnVlO1xuICAgICAgICAgIHNsaWRlcnNXcmFwcGVyLmFkZEV2ZW50TGlzdGVuZXIoJ3doZWVsJywgZGVza3RvcFN3aXBlcldoZWVsSGFuZGxlcik7XG4gICAgICAgICAgc2xpZGVyc1dyYXBwZXIuYWRkRXZlbnRMaXN0ZW5lcigndG91Y2hzdGFydCcsIGRlc2t0b3BTd2lwZXJUb3VjaFN0YXJ0KTtcbiAgICAgICAgICBzbGlkZXJzV3JhcHBlci5hZGRFdmVudExpc3RlbmVyKCd0b3VjaGVuZCcsIGRlc2t0b3BTd2lwZXJUb3VjaEVuZCk7XG4gICAgICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3Njcm9sbCcsIGRlc2t0b3BTY3JvbGxIYW5kbGVyKTtcbiAgICAgICAgICBtYWluUGFnZS5zdHlsZS5vdmVyZmxvd1kgPSAnaGlkZGVuJztcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfTtcblxuICB2YXIgdGFibGV0U2Nyb2xsSGFuZGxlciA9IGZ1bmN0aW9uICgpIHtcbiAgICBpZiAod2luZG93Lm1hdGNoTWVkaWEoJyhtaW4td2lkdGg6IDc2OHB4KSBhbmQgKG1heC13aWR0aDogMTI3OXB4KScpLm1hdGNoZXMpIHtcbiAgICAgIGlmIChNYXRoLmFicyh3aW5kb3cucGFnZVlPZmZzZXQgLSBzbGlkZXJzV3JhcHBlclRvcCkgPCAoc2xpZGVyc1dyYXBwZXJIZWlnaHQgKiAwLjEpKSB7XG4gICAgICAgIGlmICghY3VycmVudFBhcnRuZXJzKSB7XG4gICAgICAgICAgY3VycmVudFBhcnRuZXJzID0gbW9iaWxlU3dpcGVyLnNsaWRlc1swXS5xdWVyeVNlbGVjdG9yKCcuZGlyZWN0aW9uc19fcGFydG5lcnMnKTtcbiAgICAgICAgICBjdXJyZW50UGFydG5lcnMuY2xhc3NMaXN0LmFkZCgncGFydG5lcnMtbW92ZScpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9O1xuXG4gIGlmICh3aW5kb3cubWF0Y2hNZWRpYSgnKG1pbi13aWR0aDogNzY4cHgpIGFuZCAobWF4LXdpZHRoOiAxMjc5cHgpJykubWF0Y2hlcykge1xuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdzY3JvbGwnLCB0YWJsZXRTY3JvbGxIYW5kbGVyKTtcbiAgfVxuXG4gIGlmICh3aW5kb3cubWF0Y2hNZWRpYSgnKG1pbi13aWR0aDogMTI4MHB4KScpLm1hdGNoZXMpIHtcbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignc2Nyb2xsJywgZGVza3RvcFNjcm9sbEhhbmRsZXIpO1xuICB9XG5cbiAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tXG4gIHZhciBmb290ZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdmb290ZXInKTtcbiAgaWYgKHNjcmVlbldpZHRoID4gNzY3KSB7XG4gICAgZm9vdGVyLmNsYXNzTGlzdC5hZGQoJ3dvdycpO1xuICAgIGZvb3Rlci5jbGFzc0xpc3QuYWRkKCdmYWRlSW4nKTtcbiAgfSBlbHNlIGlmIChzY3JlZW5XaWR0aCA8IDc2Nykge1xuICAgIGZvb3Rlci5jbGFzc0xpc3QucmVtb3ZlKCdmYWRlSW4nKTtcbiAgICBmb290ZXIuY2xhc3NMaXN0LnJlbW92ZSgnd293Jyk7XG4gIH1cblxufSkoKTtcblxuKGZ1bmN0aW9uICgpIHtcbiAgbmV3IFdPVygpLmluaXQoKTtcbn0pKCk7XG5cbihmdW5jdGlvbiAoKSB7XG4gIHZhciBzbGlkZXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcubnVtYmVyc19fc2xpZGUnKTtcblxuICB2YXIgY3VycmVudFNsaWRlID0gMDtcbiAgdmFyIG5leHRTbGlkZSA9IGZ1bmN0aW9uICgpIHtcbiAgICBzbGlkZXNbY3VycmVudFNsaWRlXS5jbGFzc0xpc3QucmVtb3ZlKCdudW1iZXJzX19zbGlkZS0tc2hvdycpO1xuICAgIGN1cnJlbnRTbGlkZSA9IChjdXJyZW50U2xpZGUgKyAxKSAlIHNsaWRlcy5sZW5ndGg7XG4gICAgc2xpZGVzW2N1cnJlbnRTbGlkZV0uY2xhc3NMaXN0LmFkZCgnbnVtYmVyc19fc2xpZGUtLXNob3cnKTtcbiAgfTtcblxuICBzZXRJbnRlcnZhbChuZXh0U2xpZGUsIDMwMDApO1xufSkoKTtcbiIsIid1c2Ugc3RyaWN0JztcblxuKGZ1bmN0aW9uICgpIHtcbiAgdmFyIHNpZGViYXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuc2lkZWJhcicpO1xuICB2YXIgYnV0dG9uID0gc2lkZWJhci5xdWVyeVNlbGVjdG9yKCcuc2lkZWJhcl9fYnV0dG9uJyk7XG5cbiAgaWYgKHNpZGViYXIpIHtcbiAgICBidXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbiAoKSB7XG4gICAgICBidXR0b24uY2xhc3NMaXN0LnRvZ2dsZSgnc2lkZWJhcl9fYnV0dG9uLS1jbG9zZScpO1xuICAgIH0pO1xuICB9XG5cbiAgdmFyIHNpZGViYXJOYXYgPSBzaWRlYmFyLnF1ZXJ5U2VsZWN0b3IoJy5zaWRlYmFyX19uYXYnKTtcbiAgdmFyIHNpZGViYXJTZWFyY2ggPSBzaWRlYmFyLnF1ZXJ5U2VsZWN0b3IoJy5zaWRlYmFyX19zZWFyY2gnKTtcbiAgdmFyIGJ1dHRvblNlYXJjaCA9IHNpZGViYXIucXVlcnlTZWxlY3RvcignLmNvbnRyb2xzX19zZWFyY2gnKTtcblxuICB2YXIgdG9nZ2xlU2VhcmNoID0gZnVuY3Rpb24gKGV2dCkge1xuICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIHNpZGViYXJOYXYuY2xhc3NMaXN0LnRvZ2dsZSgnc2lkZWJhcl9fbmF2LS1oaWRlJyk7XG4gICAgc2lkZWJhclNlYXJjaC5jbGFzc0xpc3QudG9nZ2xlKCdzaWRlYmFyX19zZWFyY2gtLXNob3cnKTtcbiAgICBidXR0b25TZWFyY2guY2xhc3NMaXN0LnRvZ2dsZSgnY29udHJvbHNfX3NlYXJjaC0tb3BlbicpO1xuICB9O1xuXG4gIHZhciB0b2dnbGVTZWFyY2hMaXN0ZW5lciA9IGZ1bmN0aW9uICgpIHtcbiAgICBpZiAod2luZG93LmlubmVyV2lkdGggPCA3NjgpIHtcbiAgICAgIGJ1dHRvblNlYXJjaC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHRvZ2dsZVNlYXJjaCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGJ1dHRvblNlYXJjaC5yZW1vdmVFdmVudExpc3RlbmVyKCdjbGljaycsIHRvZ2dsZVNlYXJjaCk7XG4gICAgfVxuICB9O1xuXG4gIHdpbmRvdy5vbnJlc2l6ZSA9IHRvZ2dsZVNlYXJjaExpc3RlbmVyO1xuXG59KSgpO1xuIiwiJ3VzZSBzdHJpY3QnO1xuXG4oZnVuY3Rpb24gKCkge1xuICB2YXIgRVNDID0gMjc7XG4gIHZhciBib2R5ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignYm9keScpO1xuICB2YXIgbW9kYWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubW9kYWwnKTtcbiAgdmFyIG1vZGFsT3ZlcmxheSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5tb2RhbF9fb3ZlcmxheScpO1xuICB2YXIgYnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm1vZGFsX19jbG9zZS1idXR0b24nKTtcblxuICB2YXIgY2xvc2VNb2RhbCA9IGZ1bmN0aW9uIChldnQpIHtcbiAgICBldnQucHJldmVudERlZmF1bHQoKTtcbiAgICBpZiAoZXZ0LnR5cGUgPT09ICdjbGljaycpIHtcbiAgICAgIG1vZGFsLmNsYXNzTGlzdC5yZW1vdmUoJ21vZGFsLS1zaG93Jyk7XG4gICAgICBib2R5LmNsYXNzTGlzdC5yZW1vdmUoJ25vLXNjcm9sbCcpO1xuICAgIH1cbiAgICBpZiAoZXZ0LmtleUNvZGUgPT09IEVTQykge1xuICAgICAgbW9kYWwuY2xhc3NMaXN0LnJlbW92ZSgnbW9kYWwtLXNob3cnKTtcbiAgICAgIGJvZHkuY2xhc3NMaXN0LnJlbW92ZSgnbm8tc2Nyb2xsJyk7XG4gICAgfVxuICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCdrZXlkb3duJywgY2xvc2VNb2RhbCk7XG4gICAgbW9kYWxPdmVybGF5LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgY2xvc2VNb2RhbCk7XG4gICAgYnV0dG9uLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgY2xvc2VNb2RhbCk7XG4gICAgaWYgKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5kaXJlY3Rpb25zLW91dGVyLXdyYXAtLWZpeGVkJykpIHtcbiAgICAgIHdpbmRvdy5kaXNhYmxlU2Nyb2xsKCk7XG4gICAgfVxuICB9O1xuXG4gIGJvZHkuY2xhc3NMaXN0LmFkZCgnbm8tc2Nyb2xsJyk7XG4gIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgY2xvc2VNb2RhbCk7XG4gIG1vZGFsT3ZlcmxheS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGNsb3NlTW9kYWwpO1xuICBidXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBjbG9zZU1vZGFsKTtcbiAgaWYgKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5kaXJlY3Rpb25zLW91dGVyLXdyYXAtLWZpeGVkJykpIHtcbiAgICB3aW5kb3cuZW5hYmxlU2Nyb2xsKCk7XG4gIH1cblxufSkoKTtcbiIsIid1c2Ugc3RyaWN0JztcblxuKGZ1bmN0aW9uICgpIHtcbiAgdmFyIHNlY3Rpb24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcudmlkZW8nKTtcbiAgdmFyIGZyYW1lID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnZpZGVvX19wbGF5ZXInKTtcbiAgdmFyIHBsYXllciA9IG5ldyBWaW1lby5QbGF5ZXIoJ3ZpZGVvX19wbGF5ZXInKTtcbiAgdmFyIHNsb2dhbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy52aWRlb19fc2xvZ2FuJyk7XG4gIHZhciBidXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcudmlkZW9fX3BsYXknKTtcblxuICB2YXIgcGxheVZpZGVvID0gZnVuY3Rpb24gKGV2dCkge1xuICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIHNlY3Rpb24uY2xhc3NMaXN0LmFkZCgndmlkZW8tLXBsYXlpbmcnKTtcbiAgICBwbGF5ZXIucGxheSgpO1xuICB9O1xuXG4gIHBsYXllci5vbigncGxheScsIGZ1bmN0aW9uICgpIHtcbiAgICBmcmFtZS5jbGFzc0xpc3QuYWRkKCd2aWRlb19fcGxheWVyLS1zaG93Jyk7XG4gICAgc2xvZ2FuLmNsYXNzTGlzdC5hZGQoJ3ZpZGVvX19zbG9nYW4tLWhpZGUnKTtcbiAgICBidXR0b24uY2xhc3NMaXN0LmFkZCgndmlkZW9fX3BsYXktLWhpZGUnKTtcbiAgfSk7XG5cbiAgLy8gcGxheWVyLm9uKCdwYXVzZScsIGZ1bmN0aW9uICgpIHtcbiAgLy8gICBzbG9nYW4uY2xhc3NMaXN0LnJlbW92ZSgndmlkZW9fX3Nsb2dhbi0taGlkZScpO1xuICAvLyAgIGJ1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKCd2aWRlb19fcGxheS0taGlkZScpO1xuICAvLyB9KTtcblxuICBwbGF5ZXIub24oJ2ZpbmlzaCcsIGZ1bmN0aW9uICgpIHtcbiAgICBzZWN0aW9uLmNsYXNzTGlzdC5yZW1vdmUoJ3ZpZGVvLS1wbGF5aW5nJyk7XG4gICAgc2xvZ2FuLmNsYXNzTGlzdC5yZW1vdmUoJ3ZpZGVvX19zbG9nYW4tLWhpZGUnKTtcbiAgICBidXR0b24uY2xhc3NMaXN0LnJlbW92ZSgndmlkZW9fX3BsYXktLWhpZGUnKTtcbiAgICBmcmFtZS5jbGFzc0xpc3QucmVtb3ZlKCd2aWRlb19fcGxheWVyLS1zaG93Jyk7XG4gIH0pO1xuXG4gIGJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHBsYXlWaWRlbyk7XG59KSgpO1xuIl19
